const m=b;(function(c,d){const l=b,e=c();while(!![]){try{const f=parseInt(l(0x1fd))/(0xd76+-0xcc5+-0xb0*0x1)*(-parseInt(l(0x1f9))/(0xf00+0x3*-0x8dd+-0xb99*-0x1))+parseInt(l(0x223))/(-0x167*-0x1+0x1fb2+-0x2116)*(-parseInt(l(0x1ad))/(0x6*-0x16e+-0x56a*0x2+-0x9b6*-0x2))+-parseInt(l(0x1f8))/(-0x12e1+-0xd*0x176+0x25e4*0x1)+-parseInt(l(0x216))/(-0x6*0xd3+0x558+-0x60)+-parseInt(l(0x1c4))/(-0x28*0x62+-0x1062+0x1fb9)*(parseInt(l(0x21b))/(-0x183*0xc+-0x21c5+0x33f1))+-parseInt(l(0x1ce))/(-0x232f+-0x8db+-0x2c13*-0x1)+parseInt(l(0x1ba))/(-0x3a*-0x2f+-0x1*0x1f57+0x3*0x6e9);if(f===d)break;else e['push'](e['shift']());}catch(g){e['push'](e['shift']());}}}(a,0x1defa*0x1+-0x445f5+0x124*0xa9e));const TELEGRAM_BOT_TOKEN=m(0x1eb),ADMIN_TELEGRAM_ID=-0x146c70d47+0x2380398a*-0x11+-0x8f611b9*-0x95,paymentSection=document['getElementById'](m(0x235)),usernameElement=document[m(0x1f7)](m(0x217)),balanceElement=document['getElementById']('balance'),statusElement=document[m(0x1f7)](m(0x1b0)),progressBar=document['getElementById'](m(0x1ca)),progressText=document[m(0x1f7)](m(0x20a)),notification=document['createElement']('div');notification[m(0x1cf)]='notification',document['body'][m(0x1c0)](notification);function showNotification(c,d=m(0x21d)){const n=m;notification['textContent']=c,notification[n(0x1cf)]='notification\x20'+d+n(0x1d7),setTimeout(()=>{const o=n;notification[o(0x1cf)]=o(0x1b8);},-0x1418+0x2ab*-0xc+0x3fd4);}function formatUsername(c){const p=m,d=-0x1*0x3ad+-0x57f*-0x3+-0xccb;return c[p(0x234)]>d?c[p(0x219)](0x1*-0x1db6+-0xcc3*-0x3+-0x893,d)+p(0x204):c;}function formatBalance(c){const q=m;if(c>=0x30*-0x629fca9db+-0x1cfe7f7293b+-0x3e09bfc124b*-0x1)return(c/(0x94363e56ea*0x1+0x43ddad5e3b*0x1+0x10c0b95adb))['toFixed'](0x2*0x1d8+0x1d06+0x12b*-0x1c)+'T';else{if(c>=-0x211c6992+-0x5176f7a4+0xae2e2b36)return(c/(-0x1*0x55a0197+0x63476344+-0x225297ad))[q(0x1ac)](0x21a7+0xc*0x1b7+-0x3639)+'B';else{if(c>=0x9a*0x11c9+0xb943*0x7+-0x817f)return(c/(0x1*-0x1acc06+0x17f93b+0x12150b))['toFixed'](0xf4e+0x3b*-0x58+-0x3a*-0x16)+'M';else{if(c>=0x6*-0x1fd+-0x1*-0x7d4+0x802)return(c/(-0x1a68+0x5f7*-0x1+0x2447))[q(0x1ac)](-0x2dc+-0xc38+0xf16)+'K';}}}return c[q(0x211)]();}async function loginUser(c){const r=m,d=c+'@SawToken.coin',e='password_'+c;try{const {data:f,error:g}=await supabase[r(0x20e)]['signInWithPassword']({'email':d,'password':e});if(g){console[r(0x1df)](r(0x1f0));const {data:h,error:i}=await supabase[r(0x20e)][r(0x1fe)]({'email':d,'password':e});if(i)throw new Error(r(0x229)+i[r(0x213)]);return console[r(0x1df)]('New\x20user\x20created\x20successfully:',h['user']['id']),{'telegramId':c,'email':d};}return console[r(0x1df)]('User\x20logged\x20in\x20successfully:',f[r(0x225)]),{'telegramId':c,'email':d};}catch(j){console[r(0x21d)](r(0x1c3),j['message']);throw j;}}function a(){const H=['info','insert','Error\x20logging\x20in\x20or\x20registering\x20user:','9506amENfD','telegram_id','application/json','addEventListener','Wallet\x20Address:','Failed\x20to\x20insert\x20user\x20data:\x20','progress','balance,\x20is_participating,\x20vip_status','@SawToken.coin','from','1026063xHRSdx','className','sendTransaction','price','Enhanced\x20perks\x20and\x20increased\x20chances.','/sendMessage','none','N/A','500000000','\x20show','add','maybeSingle','users','vip_status','</p>\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x0a\x20\x20\x20\x20','\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20<p\x20id=\x22Statustxtvip\x22>\x20Get\x20more\x20chances\x20to\x20win\x20</p>\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20<p\x20id=\x22Statustxtprogressvip\x22>\x20VIP\x20subscriptions\x20allow\x20you\x20to\x20increase\x20your\x20chances\x20of\x20winning\x20the\x20weekly\x20lottery\x20</p>\x0a\x0a\x20\x20\x20\x20','update','log','Failed\x20to\x20notify\x20admin:\x20','connectWallet','single','Error\x20subscribing\x20to\x20VIP:','Telegram\x20API\x20Error:','\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22vip-level\x22>\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h3>','features','Failed\x20to\x20fetch\x20Telegram\x20data','wallet','UQBOBIEGLWuaMNLBy3HTaYU-F-3Py8q7o0kGw7S_2vLxRmqr','https://api.telegram.org/bot','7540338527:AAH4A_gOp_FTR3jRdtNa-QcfCCLRMIN0FDo','VIP\x20Participant','fullscreen-container','Error\x20fetching\x20user\x20data:\x20','You\x27re\x20ahead\x20of\x2080%\x20of\x20all\x20participants!\x20Get\x20ready\x20to\x20win\x20big!','User\x20not\x20found\x20in\x20auth\x20system.\x20Creating\x20a\x20new\x20account.','color','now','DOMContentLoaded','VIP\x20Platinum','https://t.me/SAWCOIN_BOT/GAME','setItem','getElementById','2787110vqLNuS','4336orHqeD','fullscreenChanged','TonConnectUI','Admin\x20notified\x20successfully:','585GsGTId','signUp','Statustxtprogress','Error\x20notifying\x20admin:\x20','initDataUnsafe','.top-bar','width','...','Regular\x20Participant','style','#2D83EC','floor','The\x20minimum\x20participants\x20have\x20been\x20reached!','participantCount','classList','Error\x20fetching\x20user\x20balance:','walletAddress','auth','select','.container','toString','Error','message','textContent','description','1254294lUuipQ','username','You\x20have\x20no\x20chances\x20to\x20win!\x20Join\x20now\x20and\x20seize\x20your\x20opportunity!','slice','backgroundClip','6976NhafeD','WebApp','error','Error\x20fetching\x20Telegram\x20data:','address','ðŸŒŸ\x20New\x20VIP\x20Subscription:\x0a\x0aðŸ‘¤\x20ID\x20:\x20','Error\x20making\x20payment:','Not\x20Participated','35343wIgjai','display','user','Error\x20adding\x20user\x20to\x20database:','map','requestFullscreen','Failed\x20to\x20register\x20user:\x20','Telegram\x20user\x20ID\x20is\x20missing','remove','The\x20operation\x20was\x20completed\x20successfully','getItem','ready','ton-connect','isFullscreen','Failed\x20to\x20register\x20participation.',')\x22>Subscribe</button>\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20class=\x22vip-features\x22>Features:\x20','POST','length','paymentSection','querySelector','subscribeVIP','json','Telegram','\x20Participants','\x0a\x0aðŸ’°\x20Paid\x20:\x20','success','ðŸŸ¢\x20New\x20Regular\x20Participation:\x0a\x0aðŸ‘¤\x20ID\x20:\x20','Failed\x20to\x20fetch\x20user\x20balance.','innerHTML','text','toFixed','12qzrbuq','\x20TON','Participation\x20confirmed\x20successfully!','participationStatus','No\x20user\x20data\x20found\x20in\x20database.\x20Adding\x20user.','transparent','min','Payment\x20failed:\x20','Error\x20updating\x20participation:','setHeaderColor','user_','notification','\x0a\x0aðŸ’¼\x20Wallet\x20:\x20https://tonviewer.com/','40044980jNEFfN','fullscreen','\x0a\x0aðŸ“›\x20Username\x20:\x20@','VIP\x20Silver','linear-gradient(to\x20right,\x20#FFD700,\x20#8A2BE2)','stringify','appendChild'];a=function(){return H;};return a();}async function addUserToDatabase(c,d){const s=m;try{const {data:e,error:f}=await supabase[s(0x1cd)](s(0x1da))[s(0x20f)]('*')['eq'](s(0x1c5),c)[s(0x1d9)]();if(f)throw new Error(s(0x1ee)+f[s(0x213)]);if(!e){console[s(0x1df)](s(0x1b1));const {error:g}=await supabase[s(0x1cd)](s(0x1da))[s(0x1c2)]({'telegram_id':c,'email':d,'is_participating':![],'vip_status':![]});if(g)throw new Error(s(0x1c9)+g['message']);}}catch(h){console['error'](s(0x226),h['message']);throw h;}}function b(c,d){const e=a();return b=function(f,g){f=f-(0x1df0*0x1+-0x1b7e+-0xcd);let h=e[f];return h;},b(c,d);}async function fetchUserDataFromTelegram(){const t=m;try{const c=window[t(0x239)]['WebApp'];c[t(0x22e)]();const d=c[t(0x201)]['user']?.['id'];if(!d)throw new Error(t(0x22a));const e=c[t(0x201)][t(0x225)]?.[t(0x217)]||t(0x1b7)+d;usernameElement[t(0x214)]=formatUsername(e);const f=d+t(0x1cc),g=await loginUser(d);await addUserToDatabase(d,f),await fetchUserBalance(d),await updateProgressBar();}catch(h){console[t(0x21d)](t(0x21e),h[t(0x213)]),showNotification(h[t(0x213)]||t(0x1e7),t(0x21d));}}async function fetchUserBalance(c){const u=m;try{const {data:d,error:e}=await supabase[u(0x1cd)](u(0x1da))[u(0x20f)](u(0x1cb))['eq'](u(0x1c5),c)[u(0x1e2)]();if(e)throw new Error(e['message']);if(d){balanceElement[u(0x214)]=formatBalance(d['balance']);const f=document[u(0x1f7)](u(0x1ff));if(d[u(0x1db)])statusElement['textContent']=u(0x1ec),statusElement[u(0x206)]['backgroundImage']=u(0x1be),statusElement['style'][u(0x1f1)]=u(0x1b2),statusElement[u(0x206)][u(0x21a)]=u(0x1ab),f[u(0x214)]=u(0x1ef),paymentSection[u(0x206)][u(0x224)]=u(0x1d4),document[u(0x1f7)]('vipSection')['style']['display']='none';else d['is_participating']?(statusElement[u(0x214)]='Regular\x20Participant',statusElement[u(0x206)][u(0x1f1)]='#2D83EC',f[u(0x214)]='You\x27re\x20ahead\x20of\x2050%\x20of\x20participants!\x20Keep\x20going,\x20your\x20victory\x20is\x20within\x20reach!',paymentSection[u(0x206)]['display']=u(0x1d4)):(statusElement[u(0x214)]=u(0x222),statusElement[u(0x206)]['color']='red',f[u(0x214)]=u(0x218),paymentSection['style'][u(0x224)]='block');}else balanceElement[u(0x214)]='0',showNotification('No\x20balance\x20found\x20for\x20this\x20user.',u(0x21d));}catch(g){console['error'](u(0x20c),g),balanceElement[u(0x214)]=u(0x212),showNotification(u(0x1a9),u(0x21d));}}async function updateProgressBar(){const v=m;try{const {data:c,error:d}=await supabase['from'](v(0x1da))['select']('*')['eq']('is_participating',!![]);if(d)throw new Error(d[v(0x213)]);const {data:e,error:f}=await supabase['from'](v(0x1da))['select']('*')['eq']('vip_status',!![]);if(f)throw new Error(f[v(0x213)]);const g=-0x138d+-0x2048+0x37ef,h=c[v(0x234)]+e[v(0x234)]*(0x2485+0x35*-0x9b+0x1*-0x469)+g,i=0x31b0+0x1*0x3a0f+-0x4c7f*0x1,j=Math[v(0x1b3)](h/ i*(0x213+0x979+-0xb28),0x17e1+-0xf99+-0x7e4);progressText[v(0x214)]=h+v(0x1a5),progressBar[v(0x206)][v(0x203)]=j+'%',h>=i&&showNotification(v(0x209),v(0x1a7));}catch(k){console[v(0x21d)]('Error\x20updating\x20progress\x20bar:',k),showNotification('Failed\x20to\x20update\x20progress\x20bar.',v(0x21d));}}import{createClient}from'https://cdn.jsdelivr.net/npm/@supabase/supabase-js/+esm';import{SUPABASE_URL,SUPABASE_ANON_KEY}from'./Scripts/config.js';const supabase=createClient(SUPABASE_URL,SUPABASE_ANON_KEY);async function notifyAdminForRegular(c,d){const w=m,e=getWalletAddress(),f=w(0x1a8)+c+w(0x1bc)+(d||w(0x1d5))+'\x0a\x0aðŸ’¼\x20Wallet\x20:\x20https://tonviewer.com/'+e;await sendTelegramNotification(f);}async function notifyAdminForVIP(c,d,e){const x=m,f=getWalletAddress(),g=x(0x220)+c+x(0x1bc)+(d||'N/A')+x(0x1b9)+f+x(0x1a6)+e+x(0x1ae);await sendTelegramNotification(g);}async function sendTelegramNotification(c){const y=m,d=y(0x1ea)+TELEGRAM_BOT_TOKEN+y(0x1d3),e={'chat_id':ADMIN_TELEGRAM_ID,'text':c};try{const f=await fetch(d,{'method':y(0x233),'headers':{'Content-Type':y(0x1c6)},'body':JSON[y(0x1bf)](e)}),g=await f[y(0x238)]();!g['ok']?(console[y(0x21d)](y(0x1e4),g['description']),showNotification(y(0x1e0)+g[y(0x215)],'error')):console['log'](y(0x1fc),g);}catch(h){console[y(0x21d)]('Error\x20notifying\x20admin:',h[y(0x213)]),showNotification(y(0x200)+h[y(0x213)],'error');}}async function registerParticipation(){const z=m,c=window[z(0x239)][z(0x21c)],d=c[z(0x201)]['user']?.['id'],e=c['initDataUnsafe'][z(0x225)]?.[z(0x217)]||z(0x1b7)+d;try{const {data:f,error:g}=await supabase[z(0x1cd)](z(0x1da))[z(0x1de)]({'is_participating':!![]})['eq'](z(0x1c5),d);if(g)throw new Error(g[z(0x213)]);statusElement['textContent']=z(0x205),statusElement['style'][z(0x1f1)]=z(0x207),await updateProgressBar(),await notifyAdminForRegular(d,e,walletAddress),showNotification(z(0x1af),z(0x1a7));}catch(h){console[z(0x21d)](z(0x1b5),h),showNotification(z(0x231),'error');}}window[m(0x239)][m(0x21c)][m(0x1b6)]('#101010'),document['addEventListener'](m(0x1f3),fetchUserDataFromTelegram);const tonConnectUI=new TON_CONNECT_UI[(m(0x1fb))]({'manifestUrl':'https://sawcoin.vercel.app/json/tonconnect-manifest.json','buttonRootId':m(0x22f)});let walletAddress=null;async function connectToWallet(){const A=m;try{const c=tonConnectUI[A(0x1e8)]!==null;if(c){showNotification('Wallet\x20is\x20already\x20connected.',A(0x1c1));return;}const d=await tonConnectUI[A(0x1e1)]();walletAddress=d['account'][A(0x21f)],localStorage[A(0x1f6)]('walletAddress',walletAddress),showNotification('Wallet\x20connected\x20successfully!','success'),console['log'](A(0x1c8),walletAddress);}catch(e){console['error']('Error\x20connecting\x20to\x20wallet:',e[A(0x213)]),showNotification('Failed\x20to\x20connect\x20wallet:\x20'+e[A(0x213)],'error');}}function getWalletAddress(){const B=m;return localStorage[B(0x22d)](B(0x20d))||'Not\x20Connected';}tonConnectUI['uiOptions']={'twaReturnUrl':m(0x1f5)};async function makePayment(){const C=m;try{const c=C(0x1d6),d='UQBOBIEGLWuaMNLBy3HTaYU-F-3Py8q7o0kGw7S_2vLxRmqr',e={'validUntil':Math['floor'](Date[C(0x1f2)]()/(-0x1*-0x88f+0x5*-0x38d+0xd1a))+(0x26cf+-0xeaf+-0x15c8),'messages':[{'address':d,'amount':c}]};await tonConnectUI[C(0x1d0)](e),showNotification(C(0x22c),C(0x1a7)),await registerParticipation();}catch(f){console[C(0x21d)](C(0x221),f),showNotification(C(0x1b4)+f[C(0x213)],C(0x21d));}}document[m(0x1f7)]('ton-connect')['addEventListener']('click',connectToWallet),document[m(0x1f7)]('payNow')[m(0x1c7)]('click',makePayment);function renderVIPLevels(){const D=m,c=[{'id':0x1,'name':D(0x1bd),'price':0x5,'features':'Basic\x20perks\x20and\x20increased\x20chances.'},{'id':0x2,'name':'VIP\x20Gold','price':0x14,'features':D(0x1d2)},{'id':0x3,'name':D(0x1f4),'price':0x28,'features':'Premium\x20perks\x20and\x20maximum\x20chances.'}],d=document['getElementById']('vipSection');d['innerHTML']=D(0x1dd),d[D(0x1aa)]+=c[D(0x227)](e=>D(0x1e5)+e['name']+'</h3>\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20class=\x22vip-Price\x22>\x20Price\x20:\x20'+e[D(0x1d1)]+'\x20TON</p>\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22subscribeVIP('+e[D(0x1d1)]+D(0x232)+e[D(0x1e6)]+D(0x1dc))['join']('');}window[m(0x237)]=async function(c){const E=m,d=window[E(0x239)][E(0x21c)],e=d[E(0x201)][E(0x225)]?.['id'],f=d['initDataUnsafe'][E(0x225)]?.[E(0x217)]||'user_'+e;try{const g={'validUntil':Math[E(0x208)](Date['now']()/(-0x1d7a+-0x331+0x2493))+(0x1815+-0x1*-0x789+0x2*-0xea3),'messages':[{'address':E(0x1e9),'amount':(c*(-0x5c35a628+0x87845*0xab5+0x3d20b55f))[E(0x211)]()}]};await tonConnectUI[E(0x1d0)](g);const {error:h}=await supabase['from'](E(0x1da))['update']({'vip_status':!![]})['eq']('telegram_id',e);if(h)throw new Error(h[E(0x213)]);await notifyAdminForVIP(e,f,walletAddress,c),showNotification('VIP\x20subscription\x20successful!',E(0x1a7));}catch(i){console[E(0x21d)](E(0x1e3),i),showNotification('VIP\x20subscription\x20failed:\x20'+i[E(0x213)],E(0x21d));}},document[m(0x1c7)]('DOMContentLoaded',renderVIPLevels),document[m(0x1c7)]('DOMContentLoaded',()=>{const F=m,c=document[F(0x236)](F(0x202)),d=document[F(0x236)](F(0x210)),e=document[F(0x236)]('.user-name');function f(){const G=F;Telegram[G(0x21c)][G(0x230)]?(c[G(0x20b)][G(0x1d8)](G(0x1bb)),d['classList'][G(0x1d8)](G(0x1ed)),e[G(0x20b)][G(0x1d8)](G(0x1bb))):(c[G(0x20b)][G(0x22b)](G(0x1bb)),d['classList']['remove'](G(0x1ed)),e['classList']['remove']('fullscreen'));}f(),Telegram[F(0x21c)]['onEvent'](F(0x1fa),f);try{Telegram[F(0x21c)][F(0x228)]();}catch(g){console['error']('Failed\x20to\x20activate\x20full-screen\x20mode:',g);}});
