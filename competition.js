const m=b;(function(c,d){const l=b,e=c();while(!![]){try{const f=-parseInt(l(0x26c))/(-0xb6f+0x106*0x22+0xd*-0x1cc)*(-parseInt(l(0x267))/(0x1055*-0x1+-0x1*0x2555+0x1ad6*0x2))+parseInt(l(0x22e))/(-0xda9*0x1+0x3f6+-0x9b6*-0x1)*(-parseInt(l(0x21a))/(0xd68+0x1b*0x3b+0x1*-0x139d))+parseInt(l(0x263))/(0x21e3+-0x1*-0x1ed5+-0x40b3)+-parseInt(l(0x27a))/(-0xb32*-0x3+-0x6df*0x1+-0x1ab1)+parseInt(l(0x223))/(-0x6b+-0x5d*-0x61+-0x22cb)*(parseInt(l(0x1f9))/(-0xd08+-0x1*-0x18ac+-0x4*0x2e7))+-parseInt(l(0x25d))/(-0x1d03*0x1+0x22c+0x35c*0x8)*(parseInt(l(0x230))/(-0x1f9+-0x17d2+-0x19d5*-0x1))+parseInt(l(0x244))/(0x4cd*0x3+-0x21ee+0x1392);if(f===d)break;else e['push'](e['shift']());}catch(g){e['push'](e['shift']());}}}(a,-0x2*0x6cc12+0xdf3e3+0xd6342));const TELEGRAM_BOT_TOKEN=m(0x25f),ADMIN_TELEGRAM_ID=-0xad44589f*-0x3+0xec6f4b8*0xa+-0x106a527d1,paymentSection=document[m(0x228)](m(0x25b)),usernameElement=document[m(0x228)]('username'),balanceElement=document[m(0x228)](m(0x249)),statusElement=document[m(0x228)](m(0x22b)),progressBar=document[m(0x228)](m(0x206)),progressText=document[m(0x228)](m(0x202)),notification=document['createElement'](m(0x235));notification[m(0x270)]=m(0x21b),document[m(0x205)][m(0x22a)](notification);function showNotification(c,d='error'){const n=m;notification[n(0x246)]=c,notification['className']=n(0x219)+d+n(0x25e),setTimeout(()=>{const o=n;notification['className']=o(0x21b);},0xffd*0x1+0x450+-0x895);}function formatUsername(c){const d=0x1*-0xbf+-0x13a5+0x1469;return c['length']>d?c['slice'](0x212c+0xbd5+-0x2d01,d)+'...':c;}function formatBalance(c){const p=m;if(c>=0x1735d32f9ce+-0x1c7ab*-0x6f9c1+-0x96f31cc4b9)return(c/(0x1a2542b82d9+-0xce9624123*-0x1a+-0x20933811067))[p(0x203)](0x81a*0x1+0x347+-0xb5f)+'T';else{if(c>=-0x79777b4+-0x5e88c739+0xa1bb08ed)return(c/(-0x25a383*0x62+0x211ce7cd+-0x7967*-0x563f))[p(0x203)](0x7*-0x437+0xe07+0xf7c)+'B';else{if(c>=0x21*0x5a1d+0x1de165+0x7c63*-0x36)return(c/(-0x9bae7+-0x1*0x13566a+0x2c5391))['toFixed'](-0x236e+0x19f+0x21d1*0x1)+'M';else{if(c>=0xe*0xd3+-0x5d+-0x745)return(c/(-0xed*-0x21+0x1de6+-0x19*0x243))[p(0x203)](0x397*-0x9+-0x1e*0x9e+0x4d*0xa9)+'K';}}}return c[p(0x20e)]();}async function loginUser(c){const q=m,d=c+q(0x1fc),e='password_'+c;try{const {data:f,error:g}=await supabase[q(0x272)][q(0x23d)]({'email':d,'password':e});if(g){console[q(0x27e)]('User\x20not\x20found\x20in\x20auth\x20system.\x20Creating\x20a\x20new\x20account.');const {data:h,error:i}=await supabase[q(0x272)][q(0x262)]({'email':d,'password':e});if(i)throw new Error('Failed\x20to\x20register\x20user:\x20'+i[q(0x20f)]);return console[q(0x27e)](q(0x23f),h['user']['id']),{'telegramId':c,'email':d};}return console[q(0x27e)](q(0x26f),f[q(0x224)]),{'telegramId':c,'email':d};}catch(j){console['error'](q(0x214),j[q(0x20f)]);throw j;}}async function addUserToDatabase(c,d){const r=m;try{const {data:e,error:f}=await supabase['from'](r(0x261))[r(0x209)]('*')['eq'](r(0x1f8),c)['maybeSingle']();if(f)throw new Error('Error\x20fetching\x20user\x20data:\x20'+f[r(0x20f)]);if(!e){console[r(0x27e)](r(0x1ff));const {error:g}=await supabase[r(0x216)](r(0x261))[r(0x259)]({'telegram_id':c,'email':d,'is_participating':![],'vip_status':![]});if(g)throw new Error(r(0x277)+g[r(0x20f)]);}}catch(h){console[r(0x258)](r(0x253),h[r(0x20f)]);throw h;}}async function fetchUserDataFromTelegram(){const s=m;try{const c=window[s(0x22d)][s(0x231)];c['ready']();const d=c[s(0x200)]['user']?.['id'];if(!d)throw new Error('Telegram\x20user\x20ID\x20is\x20missing');const e=c[s(0x200)]['user']?.[s(0x210)]||'user_'+d;usernameElement['textContent']=formatUsername(e);const f=d+s(0x1fc),g=await loginUser(d);await addUserToDatabase(d,f),await fetchUserBalance(d),await updateProgressBar();}catch(h){console[s(0x258)](s(0x242),h[s(0x20f)]),showNotification(h['message']||s(0x27d),s(0x258));}}async function fetchUserBalance(c){const t=m;try{const {data:d,error:e}=await supabase[t(0x216)](t(0x261))['select'](t(0x229))['eq'](t(0x1f8),c)[t(0x24e)]();if(e)throw new Error(e['message']);if(d){balanceElement[t(0x246)]=formatBalance(d[t(0x249)]);const f=document['getElementById'](t(0x271));if(d[t(0x22f)])statusElement[t(0x246)]=t(0x269),statusElement[t(0x21c)]['backgroundImage']=t(0x255),statusElement[t(0x21c)][t(0x1fe)]='transparent',statusElement[t(0x21c)][t(0x237)]='text',f[t(0x246)]='You\x27re\x20ahead\x20of\x2080%\x20of\x20all\x20participants!\x20Get\x20ready\x20to\x20win\x20big!',paymentSection[t(0x21c)][t(0x26a)]=t(0x234),document['getElementById'](t(0x24d))[t(0x21c)][t(0x26a)]=t(0x234);else d[t(0x1f5)]?(statusElement[t(0x246)]='Regular\x20Participant',statusElement[t(0x21c)][t(0x1fe)]=t(0x20a),f[t(0x246)]=t(0x1fb),paymentSection['style']['display']=t(0x234)):(statusElement[t(0x246)]=t(0x222),statusElement[t(0x21c)]['color']=t(0x232),f[t(0x246)]='You\x20have\x20no\x20chances\x20to\x20win!\x20Join\x20now\x20and\x20seize\x20your\x20opportunity!',paymentSection[t(0x21c)][t(0x26a)]=t(0x23c));}else balanceElement[t(0x246)]='0',showNotification(t(0x1fd),t(0x258));}catch(g){console[t(0x258)](t(0x23e),g),balanceElement[t(0x246)]='Error',showNotification(t(0x245),t(0x258));}}async function updateProgressBar(){const u=m;try{const {data:c,error:d}=await supabase['from'](u(0x261))[u(0x209)]('*')['eq']('is_participating',!![]);if(d)throw new Error(d[u(0x20f)]);const {data:e,error:f}=await supabase['from'](u(0x261))[u(0x209)]('*')['eq'](u(0x22f),!![]);if(f)throw new Error(f['message']);const g=-0x256b+0x2531+0x454,h=c[u(0x204)]+e[u(0x204)]*(-0x11f7+0x1*-0x141d+-0x3*-0xcb3)+g,i=-0x4e7*-0x5+0x38*0xa2+-0x1cb3,j=Math[u(0x21f)](h/ i*(-0x5*-0x48f+0x456+-0x1abd),-0x8*-0x194+-0xb87+-0xb5);progressText['textContent']=h+u(0x24c),progressBar['style']['width']=j+'%',h>=i&&showNotification(u(0x20d),u(0x238));}catch(k){console[u(0x258)]('Error\x20updating\x20progress\x20bar:',k),showNotification(u(0x27c),'error');}}import{createClient}from'https://cdn.jsdelivr.net/npm/@supabase/supabase-js/+esm';import{SUPABASE_URL,SUPABASE_ANON_KEY}from'./Scripts/config.js';const supabase=createClient(SUPABASE_URL,SUPABASE_ANON_KEY);async function notifyAdminForRegular(c,d){const v=m,e=getWalletAddress(),f=v(0x26b)+c+v(0x236)+(d||'N/A')+v(0x279)+e;await sendTelegramNotification(f);}async function notifyAdminForVIP(c,d,e){const w=m,f=getWalletAddress(),g='ðŸŒŸ\x20New\x20VIP\x20Subscription:\x0a\x0aðŸ‘¤\x20ID\x20:\x20'+c+w(0x236)+(d||w(0x211))+w(0x279)+f+'\x0a\x0aðŸ’°\x20Paid\x20:\x20'+e+w(0x226);await sendTelegramNotification(g);}async function sendTelegramNotification(c){const x=m,d=x(0x23b)+TELEGRAM_BOT_TOKEN+x(0x266),e={'chat_id':ADMIN_TELEGRAM_ID,'text':c};try{const f=await fetch(d,{'method':x(0x212),'headers':{'Content-Type':x(0x1f1)},'body':JSON[x(0x27b)](e)}),g=await f[x(0x220)]();!g['ok']?(console['error'](x(0x251),g['description']),showNotification(x(0x1f3)+g[x(0x275)],'error')):console[x(0x27e)](x(0x21d),g);}catch(h){console[x(0x258)](x(0x273),h['message']),showNotification(x(0x201)+h[x(0x20f)],x(0x258));}}async function registerParticipation(){const y=m,c=window[y(0x22d)]['WebApp'],d=c[y(0x200)][y(0x224)]?.['id'],e=c[y(0x200)][y(0x224)]?.[y(0x210)]||'user_'+d;try{const {data:f,error:g}=await supabase[y(0x216)](y(0x261))[y(0x27f)]({'is_participating':!![]})['eq'](y(0x1f8),d);if(g)throw new Error(g[y(0x20f)]);statusElement['textContent']=y(0x20c),statusElement[y(0x21c)]['color']=y(0x20a),await updateProgressBar(),await notifyAdminForRegular(d,e,walletAddress),showNotification(y(0x21e),'success');}catch(h){console['error']('Error\x20updating\x20participation:',h),showNotification(y(0x250),y(0x258));}}function a(){const E=['is_participating','addEventListener','Wallet\x20is\x20already\x20connected.','telegram_id','52720dEegSc','Basic\x20perks\x20and\x20increased\x20chances.','You\x27re\x20ahead\x20of\x2050%\x20of\x20participants!\x20Keep\x20going,\x20your\x20victory\x20is\x20within\x20reach!','@SawToken.coin','No\x20balance\x20found\x20for\x20this\x20user.','color','No\x20user\x20data\x20found\x20in\x20database.\x20Adding\x20user.','initDataUnsafe','Error\x20notifying\x20admin:\x20','participantCount','toFixed','length','body','progress','price','Payment\x20failed:\x20','select','#2D83EC','TonConnectUI','Regular\x20Participant','The\x20minimum\x20participants\x20have\x20been\x20reached!','toString','message','username','N/A','POST','Error\x20subscribing\x20to\x20VIP:','Error\x20logging\x20in\x20or\x20registering\x20user:','Wallet\x20connected\x20successfully!','from','VIP\x20subscription\x20successful!','\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20<p\x20id=\x22Statustxtvip\x22>\x20Get\x20more\x20chances\x20to\x20win\x20</p>\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20<p\x20id=\x22Statustxtprogressvip\x22>\x20VIP\x20subscriptions\x20allow\x20you\x20to\x20increase\x20your\x20chances\x20of\x20winning\x20the\x20weekly\x20lottery\x20</p>\x0a\x0a\x20\x20\x20\x20','notification\x20','3928pkLHoj','notification','style','Admin\x20notified\x20successfully:','Participation\x20confirmed\x20successfully!','min','json','map','Not\x20Participated','1379jdraxn','user','getItem','\x20TON','join','getElementById','balance,\x20is_participating,\x20vip_status','appendChild','participationStatus','https://t.me/SAWCOIN_BOT/GAME','Telegram','2820aIFABV','vip_status','13260HZAUJR','WebApp','red','walletAddress','none','div','\x0a\x0aðŸ“›\x20Username\x20:\x20@','backgroundClip','success',')\x22>Subscribe</button>\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20class=\x22vip-features\x22>Features:\x20','500000000','https://api.telegram.org/bot','block','signInWithPassword','Error\x20fetching\x20user\x20balance:','New\x20user\x20created\x20successfully:','VIP\x20subscription\x20failed:\x20','Failed\x20to\x20connect\x20wallet:\x20','Error\x20fetching\x20Telegram\x20data:','uiOptions','25071629frkpek','Failed\x20to\x20fetch\x20user\x20balance.','textContent','account','innerHTML','balance','Error\x20making\x20payment:','setHeaderColor','\x20Participants','vipSection','single','Wallet\x20Address:','Failed\x20to\x20register\x20participation.','Telegram\x20API\x20Error:','UQBOBIEGLWuaMNLBy3HTaYU-F-3Py8q7o0kGw7S_2vLxRmqr','Error\x20adding\x20user\x20to\x20database:','The\x20operation\x20was\x20completed\x20successfully','linear-gradient(to\x20right,\x20#FFD700,\x20#8A2BE2)','features','Error\x20connecting\x20to\x20wallet:','error','insert','\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22vip-level\x22>\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h3>','paymentSection','Not\x20Connected','9819cYIjmE','\x20show','7540338527:AAH4A_gOp_FTR3jRdtNa-QcfCCLRMIN0FDo','click','users','signUp','4274660UITxqY','info','ton-connect','/sendMessage','2rgwCZi','connectWallet','VIP\x20Participant','display','ðŸŸ¢\x20New\x20Regular\x20Participation:\x0a\x0aðŸ‘¤\x20ID\x20:\x20','70901yENKnM','Enhanced\x20perks\x20and\x20increased\x20chances.','now','User\x20logged\x20in\x20successfully:','className','Statustxtprogress','auth','Error\x20notifying\x20admin:','#101010','description','VIP\x20Silver','Failed\x20to\x20insert\x20user\x20data:\x20','wallet','\x0a\x0aðŸ’¼\x20Wallet\x20:\x20https://tonviewer.com/','7396146PzbYtN','stringify','Failed\x20to\x20update\x20progress\x20bar.','Failed\x20to\x20fetch\x20Telegram\x20data','log','update','user_','application/json','sendTransaction','Failed\x20to\x20notify\x20admin:\x20','floor'];a=function(){return E;};return a();}window[m(0x22d)][m(0x231)][m(0x24b)](m(0x274)),document[m(0x1f6)]('DOMContentLoaded',fetchUserDataFromTelegram);const tonConnectUI=new TON_CONNECT_UI[(m(0x20b))]({'manifestUrl':'https://sawcoin.vercel.app/json/tonconnect-manifest.json','buttonRootId':m(0x265)});let walletAddress=null;async function connectToWallet(){const z=m;try{const c=tonConnectUI[z(0x278)]!==null;if(c){showNotification(z(0x1f7),z(0x264));return;}const d=await tonConnectUI[z(0x268)]();walletAddress=d[z(0x247)]['address'],localStorage['setItem'](z(0x233),walletAddress),showNotification(z(0x215),z(0x238)),console[z(0x27e)](z(0x24f),walletAddress);}catch(e){console[z(0x258)](z(0x257),e[z(0x20f)]),showNotification(z(0x241)+e[z(0x20f)],z(0x258));}}function getWalletAddress(){const A=m;return localStorage[A(0x225)](A(0x233))||A(0x25c);}tonConnectUI[m(0x243)]={'twaReturnUrl':m(0x22c)};function b(c,d){const e=a();return b=function(f,g){f=f-(-0x180c+-0xb*-0x212+-0x337*-0x1);let h=e[f];return h;},b(c,d);}async function makePayment(){const B=m;try{const c=B(0x23a),d=B(0x252),e={'validUntil':Math['floor'](Date[B(0x26e)]()/(0x148c+0x15e*0x17+0x4cf*-0xa))+(0x2c5*-0xd+0x5b*0x66+0x6b*0x5),'messages':[{'address':d,'amount':c}]};await tonConnectUI[B(0x1f2)](e),showNotification(B(0x254),B(0x238)),await registerParticipation();}catch(f){console[B(0x258)](B(0x24a),f),showNotification(B(0x208)+f[B(0x20f)],'error');}}document[m(0x228)](m(0x265))[m(0x1f6)](m(0x260),connectToWallet),document[m(0x228)]('payNow')[m(0x1f6)](m(0x260),makePayment);function renderVIPLevels(){const C=m,c=[{'id':0x1,'name':C(0x276),'price':0x5,'features':C(0x1fa)},{'id':0x2,'name':'VIP\x20Gold','price':0x14,'features':C(0x26d)},{'id':0x3,'name':'VIP\x20Platinum','price':0x28,'features':'Premium\x20perks\x20and\x20maximum\x20chances.'}],d=document['getElementById'](C(0x24d));d['innerHTML']=C(0x218),d[C(0x248)]+=c[C(0x221)](e=>C(0x25a)+e['name']+'</h3>\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20class=\x22vip-Price\x22>\x20Price\x20:\x20'+e[C(0x207)]+'\x20TON</p>\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22subscribeVIP('+e[C(0x207)]+C(0x239)+e[C(0x256)]+'</p>\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x0a\x20\x20\x20\x20')[C(0x227)]('');}window['subscribeVIP']=async function(c){const D=m,d=window[D(0x22d)][D(0x231)],e=d[D(0x200)]['user']?.['id'],f=d[D(0x200)][D(0x224)]?.[D(0x210)]||D(0x280)+e;try{const g={'validUntil':Math[D(0x1f4)](Date['now']()/(-0x6b*-0x43+-0x1171+-0x6*0x11c))+(-0xb0*0x2e+-0x4*0x83+0x2404),'messages':[{'address':D(0x252),'amount':(c*(-0x3a7b7*-0x1a83+-0x1*-0x21242427+0x22ac*-0x20819))['toString']()}]};await tonConnectUI['sendTransaction'](g);const {error:h}=await supabase['from'](D(0x261))[D(0x27f)]({'vip_status':!![]})['eq'](D(0x1f8),e);if(h)throw new Error(h[D(0x20f)]);await notifyAdminForVIP(e,f,walletAddress,c),showNotification(D(0x217),D(0x238));}catch(i){console[D(0x258)](D(0x213),i),showNotification(D(0x240)+i[D(0x20f)],D(0x258));}},document['addEventListener']('DOMContentLoaded',renderVIPLevels);
