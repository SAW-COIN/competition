const m=b;(function(c,d){const l=b,e=c();while(!![]){try{const f=parseInt(l(0x1ee))/(-0x1*0x11c6+-0x277*0xf+0x36c0)+parseInt(l(0x1f7))/(-0x52e+0x56*-0xa+0x2*0x446)*(parseInt(l(0x19f))/(0xbc5+0x7*0x433+-0x2927))+-parseInt(l(0x1dd))/(-0x557*-0x2+-0x1500+0xa56)+parseInt(l(0x1d5))/(0x19f4+-0x3*-0x757+-0x2ff4)*(-parseInt(l(0x1a7))/(0x7*0x23b+0x3d*0x35+-0x1c38))+parseInt(l(0x203))/(-0x3e0+0x205*-0xc+-0x405*-0x7)*(parseInt(l(0x20e))/(-0x3*0xa0b+0x1*-0x519+0x2342))+-parseInt(l(0x22e))/(-0x6*0x5cb+0xa*-0x103+0x2ce9)+-parseInt(l(0x200))/(-0x24cf+0x26de+-0x205);if(f===d)break;else e['push'](e['shift']());}catch(g){e['push'](e['shift']());}}}(a,0x7d6bf*0x1+0xc1*0x150+-0x1fa*-0x30));const TELEGRAM_BOT_TOKEN=m(0x1e4),ADMIN_TELEGRAM_ID=-0x23b321e51+-0x5*0x5968cced+-0x2c795c817*-0x2,paymentSection=document[m(0x1cc)](m(0x1d7)),usernameElement=document['getElementById'](m(0x1ab)),balanceElement=document[m(0x1cc)](m(0x228)),statusElement=document['getElementById'](m(0x1fd)),progressBar=document[m(0x1cc)]('progress'),progressText=document[m(0x1cc)](m(0x22b)),notification=document[m(0x1d3)](m(0x1a1));notification[m(0x1ed)]='notification',document[m(0x210)]['appendChild'](notification);function showNotification(c,d=m(0x20b)){const n=m;notification['textContent']=c,notification[n(0x1ed)]=n(0x1f8)+d+n(0x1b0),setTimeout(()=>{const o=n;notification['className']=o(0x1d9);},0x2123+-0x1019+-0x552);}function formatUsername(c){const p=m,d=-0x2c2+0x28c*-0xe+0x266f*0x1;return c['length']>d?c['slice'](0xa4a+0x803*0x1+-0x124d,d)+p(0x220):c;}function formatBalance(c){const q=m;if(c>=-0x4*0x72cbb26e78+0x297991*0x49a9b+0x7*0x4794b42303)return(c/(0x8b8fc7*0x34106+0xe90f23d5ff+-0x1c49802a9*0x101))[q(0x1ea)](-0xbd7*-0x3+0x3*0x7ca+-0x3ae1)+'T';else{if(c>=-0x16e72408+-0xdd90af1+0x605af8f9)return(c/(0x6a2dc174+0x6a97bd*0x81+-0x309fb91*0x21))[q(0x1ea)](0x1996+0x1*0x1fd3+-0xb7b*0x5)+'B';else{if(c>=-0x2f*-0x4f63+-0x15ccdc+0x167bef)return(c/(0x1a8942+-0x78*0x2e92+0x5b3*0x1da))[q(0x1ea)](0x964+0x1258+-0xa9*0x2a)+'M';else{if(c>=-0x286*-0x1+0x27*-0x71+-0x45*-0x45)return(c/(-0x94*0x1d+-0x16a*0x3+0x18ea))[q(0x1ea)](0x9*-0x2b8+-0x79*-0xb+0xf*0x149)+'K';}}}return c['toString']();}async function loginUser(c){const r=m,d=c+'@SawToken.coin',e='password_'+c;try{const {data:f,error:g}=await supabase[r(0x1c0)][r(0x21f)]({'email':d,'password':e});if(g){console[r(0x1a3)](r(0x224));const {data:h,error:i}=await supabase[r(0x1c0)][r(0x1b8)]({'email':d,'password':e});if(i)throw new Error(r(0x1dc)+i[r(0x1c9)]);return console[r(0x1a3)]('New\x20user\x20created\x20successfully:',h['user']['id']),{'telegramId':c,'email':d};}return console['log'](r(0x218),f[r(0x21a)]),{'telegramId':c,'email':d};}catch(j){console['error'](r(0x19d),j[r(0x1c9)]);throw j;}}function a(){const H=['Wallet\x20Address:','\x20show','maybeSingle','color','vip_status','style','\x20TON</p>\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22subscribeVIP(','update','getItem','signUp','vipSection','Error\x20subscribing\x20to\x20VIP:','insert','sendTransaction','ðŸŸ¢\x20New\x20Regular\x20Participation:\x0a\x0aðŸ‘¤\x20ID\x20:\x20','\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20<p\x20id=\x22Statustxtvip\x22>\x20Get\x20more\x20chances\x20to\x20win\x20</p>\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20<p\x20id=\x22Statustxtprogressvip\x22>\x20VIP\x20subscriptions\x20allow\x20you\x20to\x20increase\x20your\x20chances\x20of\x20winning\x20the\x20weekly\x20lottery\x20</p>\x0a\x0a\x20\x20\x20\x20','balance\x20+\x201000000','auth','Enhanced\x20perks\x20and\x20increased\x20chances.','</h3>\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20class=\x22vip-Price\x22>\x20Price\x20:\x20','description','Failed\x20to\x20notify\x20admin:\x20','transparent','Failed\x20to\x20insert\x20user\x20data:\x20','https://sawcoin.vercel.app/json/tonconnect-manifest.json','@SawToken.coin','message','Telegram\x20API\x20Error:','\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22vip-level\x22>\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h3>','getElementById','now','success','Basic\x20perks\x20and\x20increased\x20chances.','fullscreen-container','ton-connect','remove','createElement','.container','905GxHRff','width','paymentSection','select','notification','telegram_id','Error\x20notifying\x20admin:\x20','Failed\x20to\x20register\x20user:\x20','1730568dLeSak','Telegram\x20user\x20ID\x20is\x20missing','red','VIP\x20Gold','price','#2D83EC','Error\x20adding\x20user\x20to\x20database:','7540338527:AAH4A_gOp_FTR3jRdtNa-QcfCCLRMIN0FDo','You\x27re\x20ahead\x20of\x2080%\x20of\x20all\x20participants!\x20Get\x20ready\x20to\x20win\x20big!','raw','Error\x20updating\x20progress\x20bar:','none','Admin\x20notified\x20successfully:','toFixed','Wallet\x20connected\x20successfully!','VIP\x20Silver','className','634352olPBvd','user_','Premium\x20perks\x20and\x20maximum\x20chances.','500000000','users','Failed\x20to\x20fetch\x20user\x20balance.','backgroundImage','floor','.user-name','166tzOzkH','notification\x20','No\x20user\x20data\x20found\x20in\x20database.\x20Adding\x20user.','initDataUnsafe','min','Failed\x20to\x20update\x20progress\x20bar.','participationStatus','json','DOMContentLoaded','1018530cBYTnE','Error\x20notifying\x20admin:','textContent','28dNfyYD','No\x20balance\x20found\x20for\x20this\x20user.','Payment\x20failed:\x20','map','account','is_participating','linear-gradient(to\x20right,\x20#FFD700,\x20#8A2BE2)','toString','error','Not\x20Connected','block','1798568gaVOSh','VIP\x20subscription\x20failed:\x20','body','add','ðŸŒŸ\x20New\x20VIP\x20Subscription:\x0a\x0aðŸ‘¤\x20ID\x20:\x20','N/A','Failed\x20to\x20fetch\x20Telegram\x20data','payNow','WebApp','Failed\x20to\x20connect\x20wallet:\x20','User\x20logged\x20in\x20successfully:','\x20TON','user','display','address','from','</p>\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x0a\x20\x20\x20\x20','signInWithPassword','...','onEvent','\x0a\x0aðŸ’¼\x20Wallet\x20:\x20https://tonviewer.com/','.top-bar','User\x20not\x20found\x20in\x20auth\x20system.\x20Creating\x20a\x20new\x20account.','length','fullscreen','balance\x20+\x20500000','balance','Failed\x20to\x20register\x20participation.','click','participantCount','#101010','https://api.telegram.org/bot','8636553SYbpzF','balance,\x20is_participating,\x20vip_status',')\x22>Subscribe</button>\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20class=\x22vip-features\x22>Features:\x20','setItem','You\x20have\x20no\x20chances\x20to\x20win!\x20Join\x20now\x20and\x20seize\x20your\x20opportunity!','classList','walletAddress','Wallet\x20is\x20already\x20connected.','innerHTML','join','Error\x20making\x20payment:','Error\x20logging\x20in\x20or\x20registering\x20user:','POST','39033GQKnHb','addEventListener','div','wallet','log','querySelector','Statustxtprogress','Regular\x20Participant','17124DQMkHt','ready','\x0a\x0aðŸ“›\x20Username\x20:\x20@','Telegram','username','setHeaderColor','Failed\x20to\x20activate\x20full-screen\x20mode:','features'];a=function(){return H;};return a();}function b(c,d){const e=a();return b=function(f,g){f=f-(0x1c28*-0x1+0x1492+0x92c);let h=e[f];return h;},b(c,d);}async function addUserToDatabase(c,d){const s=m;try{const {data:e,error:f}=await supabase[s(0x21d)]('users')[s(0x1d8)]('*')['eq'](s(0x1da),c)[s(0x1b1)]();if(f)throw new Error('Error\x20fetching\x20user\x20data:\x20'+f['message']);if(!e){console[s(0x1a3)](s(0x1f9));const {error:g}=await supabase[s(0x21d)](s(0x1f2))[s(0x1bb)]({'telegram_id':c,'email':d,'is_participating':![],'vip_status':![]});if(g)throw new Error(s(0x1c6)+g[s(0x1c9)]);}}catch(h){console[s(0x20b)](s(0x1e3),h['message']);throw h;}}async function fetchUserDataFromTelegram(){const t=m;try{const c=window['Telegram'][t(0x216)];c[t(0x1a8)]();const d=c[t(0x1fa)][t(0x21a)]?.['id'];if(!d)throw new Error(t(0x1de));const e=c[t(0x1fa)][t(0x21a)]?.[t(0x1ab)]||'user_'+d;usernameElement[t(0x202)]=formatUsername(e);const f=d+t(0x1c8),g=await loginUser(d);await addUserToDatabase(d,f),await fetchUserBalance(d),await updateProgressBar();}catch(h){console[t(0x20b)]('Error\x20fetching\x20Telegram\x20data:',h['message']),showNotification(h['message']||t(0x214),t(0x20b));}}async function fetchUserBalance(c){const u=m;try{const {data:d,error:e}=await supabase['from'](u(0x1f2))[u(0x1d8)](u(0x22f))['eq'](u(0x1da),c)['single']();if(e)throw new Error(e[u(0x1c9)]);if(d){balanceElement['textContent']=formatBalance(d[u(0x228)]);const f=document['getElementById'](u(0x1a5));if(d['vip_status'])statusElement[u(0x202)]='VIP\x20Participant',statusElement[u(0x1b4)][u(0x1f4)]=u(0x209),statusElement[u(0x1b4)][u(0x1b2)]=u(0x1c5),statusElement['style']['backgroundClip']='text',f[u(0x202)]=u(0x1e5),paymentSection[u(0x1b4)][u(0x21b)]=u(0x1e8),document[u(0x1cc)](u(0x1b9))[u(0x1b4)][u(0x21b)]='none';else d['is_participating']?(statusElement['textContent']=u(0x1a6),statusElement[u(0x1b4)][u(0x1b2)]=u(0x1e2),f[u(0x202)]='You\x27re\x20ahead\x20of\x2050%\x20of\x20participants!\x20Keep\x20going,\x20your\x20victory\x20is\x20within\x20reach!',paymentSection[u(0x1b4)]['display']=u(0x1e8)):(statusElement[u(0x202)]='Not\x20Participated',statusElement[u(0x1b4)][u(0x1b2)]=u(0x1df),f['textContent']=u(0x196),paymentSection[u(0x1b4)][u(0x21b)]=u(0x20d));}else balanceElement[u(0x202)]='0',showNotification(u(0x204),u(0x20b));}catch(g){console[u(0x20b)]('Error\x20fetching\x20user\x20balance:',g),balanceElement[u(0x202)]='Error',showNotification(u(0x1f3),u(0x20b));}}async function updateProgressBar(){const v=m;try{const {data:c,error:d}=await supabase['from'](v(0x1f2))['select']('*')['eq'](v(0x208),!![]);if(d)throw new Error(d[v(0x1c9)]);const {data:e,error:f}=await supabase[v(0x21d)](v(0x1f2))['select']('*')['eq'](v(0x1b3),!![]);if(f)throw new Error(f['message']);const g=-0x6bb*0x2+-0x7a7+-0x50b*-0x5,h=c[v(0x225)]+e['length']*(-0xf13+-0x1*-0x205d+-0x1145)+g,i=-0x2f0e+0xa*0x4f3+0x734*0x4,j=Math[v(0x1fb)](h/ i*(0x2028+-0x202d+0x69),-0x5ab*-0x1+-0x220b+-0x20e*-0xe);progressText['textContent']=h+'\x20Participants',progressBar[v(0x1b4)][v(0x1d6)]=j+'%',h>=i&&showNotification('The\x20minimum\x20participants\x20have\x20been\x20reached!',v(0x1ce));}catch(k){console['error'](v(0x1e7),k),showNotification(v(0x1fc),v(0x20b));}}import{createClient}from'https://cdn.jsdelivr.net/npm/@supabase/supabase-js/+esm';import{SUPABASE_URL,SUPABASE_ANON_KEY}from'./Scripts/config.js';const supabase=createClient(SUPABASE_URL,SUPABASE_ANON_KEY);async function notifyAdminForRegular(c,d){const w=m,e=getWalletAddress(),f=w(0x1bd)+c+w(0x1a9)+(d||w(0x213))+'\x0a\x0aðŸ’¼\x20Wallet\x20:\x20https://tonviewer.com/'+e;await sendTelegramNotification(f);}async function notifyAdminForVIP(c,d,e){const x=m,f=getWalletAddress(),g=x(0x212)+c+x(0x1a9)+(d||'N/A')+x(0x222)+f+'\x0a\x0aðŸ’°\x20Paid\x20:\x20'+e+x(0x219);await sendTelegramNotification(g);}async function sendTelegramNotification(c){const y=m,d=y(0x22d)+TELEGRAM_BOT_TOKEN+'/sendMessage',e={'chat_id':ADMIN_TELEGRAM_ID,'text':c};try{const f=await fetch(d,{'method':y(0x19e),'headers':{'Content-Type':'application/json'},'body':JSON['stringify'](e)}),g=await f[y(0x1fe)]();!g['ok']?(console['error'](y(0x1ca),g[y(0x1c3)]),showNotification(y(0x1c4)+g[y(0x1c3)],y(0x20b))):console[y(0x1a3)](y(0x1e9),g);}catch(h){console[y(0x20b)](y(0x201),h[y(0x1c9)]),showNotification(y(0x1db)+h['message'],y(0x20b));}}async function registerParticipation(){const z=m,c=window['Telegram'][z(0x216)],d=c[z(0x1fa)]['user']?.['id'],e=c[z(0x1fa)][z(0x21a)]?.[z(0x1ab)]||z(0x1ef)+d;try{const {data:f,error:g}=await supabase[z(0x21d)]('users')[z(0x1b6)]({'is_participating':!![],'balance':supabase[z(0x1e6)](z(0x227))})['eq']('telegram_id',d);if(g)throw new Error(g[z(0x1c9)]);statusElement[z(0x202)]=z(0x1a6),statusElement[z(0x1b4)][z(0x1b2)]='#2D83EC',await updateProgressBar(),await notifyAdminForRegular(d,e),showNotification('Participation\x20confirmed\x20successfully!',z(0x1ce));}catch(h){console['error']('Error\x20updating\x20participation:',h),showNotification(z(0x229),z(0x20b));}}window[m(0x1aa)][m(0x216)][m(0x1ac)](m(0x22c)),document[m(0x1a0)](m(0x1ff),fetchUserDataFromTelegram);const tonConnectUI=new TON_CONNECT_UI['TonConnectUI']({'manifestUrl':m(0x1c7),'buttonRootId':m(0x1d1)});let walletAddress=null;async function connectToWallet(){const A=m;try{const c=tonConnectUI[A(0x1a2)]!==null;if(c){showNotification(A(0x199),'info');return;}const d=await tonConnectUI['connectWallet']();walletAddress=d[A(0x207)][A(0x21c)],localStorage[A(0x231)](A(0x198),walletAddress),showNotification(A(0x1eb),A(0x1ce)),console['log'](A(0x1af),walletAddress);}catch(e){console[A(0x20b)]('Error\x20connecting\x20to\x20wallet:',e[A(0x1c9)]),showNotification(A(0x217)+e[A(0x1c9)],A(0x20b));}}function getWalletAddress(){const B=m;return localStorage[B(0x1b7)](B(0x198))||B(0x20c);}tonConnectUI['uiOptions']={'twaReturnUrl':'https://t.me/SAWCOIN_BOT/GAME'};async function makePayment(){const C=m;try{const c=C(0x1f1),d='UQCpMg6TV_zE34ao-Ii2iz5M6s5Qp8OIVWa3YbsB9KwxzwCJ',e={'validUntil':Math[C(0x1f5)](Date[C(0x1cd)]()/(-0x153b*-0x1+-0x1acc+0x979))+(-0x3f2*-0x5+0x29b*-0x1+-0x27*0x61),'messages':[{'address':d,'amount':c}]};await tonConnectUI['sendTransaction'](e),showNotification('The\x20operation\x20was\x20completed\x20successfully',C(0x1ce)),await registerParticipation();}catch(f){console['error'](C(0x19c),f),showNotification(C(0x205)+f[C(0x1c9)],C(0x20b));}}document['getElementById'](m(0x1d1))[m(0x1a0)](m(0x22a),connectToWallet),document['getElementById'](m(0x215))['addEventListener'](m(0x22a),makePayment);function renderVIPLevels(){const D=m,c=[{'id':0x1,'name':D(0x1ec),'price':0x5,'features':D(0x1cf)},{'id':0x2,'name':D(0x1e0),'price':0x14,'features':D(0x1c1)},{'id':0x3,'name':'VIP\x20Platinum','price':0x28,'features':D(0x1f0)}],d=document['getElementById']('vipSection');d['innerHTML']=D(0x1be),d[D(0x19a)]+=c[D(0x206)](e=>D(0x1cb)+e['name']+D(0x1c2)+e[D(0x1e1)]+D(0x1b5)+e[D(0x1e1)]+D(0x230)+e[D(0x1ae)]+D(0x21e))[D(0x19b)]('');}window['subscribeVIP']=async function(c){const E=m,d=window[E(0x1aa)]['WebApp'],e=d[E(0x1fa)][E(0x21a)]?.['id'],f=d['initDataUnsafe'][E(0x21a)]?.['username']||E(0x1ef)+e;try{const g={'validUntil':Math[E(0x1f5)](Date['now']()/(0x4f5+-0x2218+0x210b))+(-0xc5+-0x1*-0x1323+-0x7*0x24a),'messages':[{'address':'UQCpMg6TV_zE34ao-Ii2iz5M6s5Qp8OIVWa3YbsB9KwxzwCJ','amount':(c*(0x7*-0x6f1e53f+0x76a7fec2+-0x355*0x321e5))[E(0x20a)]()}]};await tonConnectUI[E(0x1bc)](g);const {error:h}=await supabase[E(0x21d)](E(0x1f2))['update']({'vip_status':!![],'balance':supabase['raw'](E(0x1bf))})['eq'](E(0x1da),e);if(h)throw new Error(h[E(0x1c9)]);await notifyAdminForVIP(e,f,c),showNotification('VIP\x20subscription\x20successful!',E(0x1ce));}catch(i){console[E(0x20b)](E(0x1ba),i),showNotification(E(0x20f)+i[E(0x1c9)],'error');}},document[m(0x1a0)]('DOMContentLoaded',renderVIPLevels),document['addEventListener'](m(0x1ff),()=>{const F=m,c=document['querySelector'](F(0x223)),d=document['querySelector'](F(0x1d4)),e=document[F(0x1a4)](F(0x1f6));function f(){const G=F;Telegram[G(0x216)]['isFullscreen']?(c[G(0x197)]['add']('fullscreen'),d[G(0x197)][G(0x211)](G(0x1d0))):(c['classList'][G(0x1d2)](G(0x226)),d['classList'][G(0x1d2)](G(0x1d0)));}f(),Telegram['WebApp'][F(0x221)]('fullscreenChanged',f);try{Telegram[F(0x216)]['requestFullscreen']();}catch(g){console[F(0x20b)](F(0x1ad),g);}});
