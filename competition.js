const m=b;(function(c,d){const l=b,e=c();while(!![]){try{const f=parseInt(l(0x13c))/(-0x2671+-0x1451*0x1+0x3ac3)+parseInt(l(0x125))/(-0xdd8+0x1*0x120b+0x25*-0x1d)+-parseInt(l(0xb9))/(-0x11e*-0x1+0x254f*0x1+0x12a*-0x21)*(parseInt(l(0xaf))/(-0x1a56+0x170d+0xd*0x41))+-parseInt(l(0xce))/(-0x2132+-0xcc9*0x3+0x4792)+-parseInt(l(0x12c))/(-0xe17+0x25*0x37+0x62a)+-parseInt(l(0x116))/(-0x6c*-0xf+0x1e47+-0x2494*0x1)+-parseInt(l(0xbe))/(0x2310+-0xcec*0x1+-0x161c)*(-parseInt(l(0x119))/(0x1*0x15e9+-0x104*-0xb+-0x210c));if(f===d)break;else e['push'](e['shift']());}catch(g){e['push'](e['shift']());}}}(a,-0x1*0x135df+0x6ca73+0x4*-0x3a16));const TELEGRAM_BOT_TOKEN=m(0x113),ADMIN_TELEGRAM_ID=0x1*-0x13ce58e00+-0x1e5b*0xe06b5+-0x12d0240f*-0x3d,paymentSection=document['getElementById'](m(0xfd)),usernameElement=document[m(0xfa)](m(0xf2)),balanceElement=document[m(0xfa)](m(0x109)),statusElement=document[m(0xfa)]('participationStatus'),progressBar=document['getElementById'](m(0xd2)),progressText=document[m(0xfa)]('participantCount'),notification=document[m(0x131)](m(0x120));notification[m(0x100)]=m(0xec),document[m(0x12e)][m(0xb2)](notification);function showNotification(c,d=m(0x121)){const n=m;notification[n(0xea)]=c,notification[n(0x100)]=n(0x143)+d+n(0x105),setTimeout(()=>{const o=n;notification[o(0x100)]='notification';},-0x2ad+-0x2395+0x2*0x18fd);}function formatUsername(c){const p=m,d=-0xcdf+0x23*0xad+0x5*-0x227;return c[p(0xe2)]>d?c[p(0xe5)](0x219*-0x5+0x51b*-0x2+-0x1*-0x14b3,d)+'...':c;}function formatBalance(c){const q=m;if(c>=0x11048b34d74*-0x1+0xf9f2da22e0+0xff2a7e3a94)return(c/(0x1b7fe300e84+-0x392fa52964+-0x95f9e5d520))['toFixed'](-0x6*-0xe9+-0x1*0x1bc7+0x1653)+'T';else{if(c>=0x1570dc63*0x2+0x2*0x10b1ec6f+0x1*-0x10aac7a4)return(c/(-0x5d5d94e6+-0x158eac5c+0xae870b42))['toFixed'](-0x2bd*-0x9+-0x1ff*0x6+-0x1*0xca9)+'B';else{if(c>=-0x3*-0x981fd+0x1e*0x8eb+-0xe4f41)return(c/(0xd6a9a+-0x109f*0xb+0x28e7b*0x1))['toFixed'](-0x6b*-0x21+0xc8e+-0x1a57)+'M';else{if(c>=0x179a*-0x1+0x7a*-0x2a+0x2f86)return(c/(0x1f*0x39+-0x2*-0x685+-0x1009))[q(0xe3)](-0x1d8d+0x226+0x1b69)+'K';}}}return c[q(0xae)]();}async function loginUser(c){const r=m,d=c+r(0xeb),e='password_'+c;try{const {data:f,error:g}=await supabase['auth'][r(0x12b)]({'email':d,'password':e});if(g){console[r(0xc8)](r(0x132));const {data:h,error:i}=await supabase['auth'][r(0x14c)]({'email':d,'password':e});if(i)throw new Error(r(0x10d)+i[r(0xde)]);return console[r(0xc8)](r(0x146),h[r(0xb7)]['id']),{'telegramId':c,'email':d};}return console['log']('User\x20logged\x20in\x20successfully:',f['user']),{'telegramId':c,'email':d};}catch(j){console['error'](r(0xb1),j['message']);throw j;}}async function addUserToDatabase(c,d){const s=m;try{const {data:e,error:f}=await supabase[s(0xd8)](s(0x12f))[s(0xc9)]('*')['eq'](s(0x134),c)[s(0x10e)]();if(f)throw new Error(s(0xb0)+f[s(0xde)]);if(!e){console[s(0xc8)]('No\x20user\x20data\x20found\x20in\x20database.\x20Adding\x20user.');const {error:g}=await supabase[s(0xd8)]('users')[s(0x141)]({'telegram_id':c,'email':d,'is_participating':![],'vip_status':![]});if(g)throw new Error(s(0x117)+g[s(0xde)]);}}catch(h){console[s(0x121)](s(0xdb),h['message']);throw h;}}async function fetchUserDataFromTelegram(){const t=m;try{const c=window['Telegram'][t(0x135)];c[t(0xbd)]();const d=c['initDataUnsafe'][t(0xb7)]?.['id'];if(!d)throw new Error(t(0xab));const e=c[t(0x104)]['user']?.[t(0xf2)]||t(0xd6)+d;usernameElement['textContent']=formatUsername(e);const f=d+t(0xeb),g=await loginUser(d);await addUserToDatabase(d,f),await fetchUserBalance(d),await updateProgressBar();}catch(h){console[t(0x121)](t(0x12a),h[t(0xde)]),showNotification(h[t(0xde)]||t(0x115),t(0x121));}}async function fetchUserBalance(c){const u=m;try{const {data:d,error:e}=await supabase[u(0xd8)]('users')[u(0xc9)](u(0xf8))['eq'](u(0x134),c)[u(0x107)]();if(e)throw new Error(e[u(0xde)]);if(d){balanceElement[u(0xea)]=formatBalance(d['balance']);const f=document[u(0xfa)](u(0x11d));if(d['vip_status'])statusElement[u(0xea)]=u(0x13a),statusElement['style']['backgroundImage']=u(0x127),statusElement['style'][u(0x149)]=u(0xe4),statusElement[u(0xd1)][u(0xf3)]='text',f[u(0xea)]=u(0x13e),paymentSection['style']['display']=u(0xcf),document[u(0xfa)](u(0x147))[u(0xd1)][u(0x106)]=u(0xcf);else d['is_participating']?(statusElement[u(0xea)]='Regular\x20Participant',statusElement[u(0xd1)]['color']=u(0xb4),f[u(0xea)]=u(0xe7),paymentSection['style'][u(0x106)]=u(0xcf)):(statusElement['textContent']=u(0x10a),statusElement[u(0xd1)][u(0x149)]=u(0xd4),f[u(0xea)]='You\x20have\x20no\x20chances\x20to\x20win!\x20Join\x20now\x20and\x20seize\x20your\x20opportunity!',paymentSection[u(0xd1)][u(0x106)]=u(0xca));}else balanceElement[u(0xea)]='0',showNotification(u(0xd0),u(0x121));}catch(g){console[u(0x121)](u(0x140),g),balanceElement[u(0xea)]=u(0x12d),showNotification(u(0xdc),u(0x121));}}async function updateProgressBar(){const v=m;try{const {data:c,error:d}=await supabase[v(0xd8)](v(0x12f))[v(0xc9)]('*')['eq'](v(0x102),!![]);if(d)throw new Error(d['message']);const {data:e,error:f}=await supabase[v(0xd8)](v(0x12f))[v(0xc9)]('*')['eq'](v(0xf4),!![]);if(f)throw new Error(f[v(0xde)]);const g=-0x1*0x1477+-0x1c88+-0x45*-0xc5,h=c[v(0xe2)]+e[v(0xe2)]*(0x1a5b+-0x23a1+0x94b)+g,i=-0xdc*0x4+0x2fa6+-0xcf6,j=Math[v(0xf1)](h/ i*(-0xf24+0x230e+0x9c3*-0x2),-0x245*0x11+-0x9a1+-0x184d*-0x2);progressText[v(0xea)]=h+v(0x11c),progressBar[v(0xd1)][v(0x108)]=j+'%',h>=i&&showNotification(v(0x128),v(0xd3));}catch(k){console[v(0x121)](v(0xf7),k),showNotification(v(0x144),v(0x121));}}import{createClient}from'https://cdn.jsdelivr.net/npm/@supabase/supabase-js/+esm';import{SUPABASE_URL,SUPABASE_ANON_KEY}from'./Scripts/config.js';const supabase=createClient(SUPABASE_URL,SUPABASE_ANON_KEY);async function notifyAdminForRegular(c,d){const w=m,e=getWalletAddress(),f=w(0x122)+c+w(0x111)+(d||w(0xc2))+w(0x14b)+e;await sendTelegramNotification(f);}function b(c,d){const e=a();return b=function(f,g){f=f-(0x1e9f+-0x228c+-0x18*-0x31);let h=e[f];return h;},b(c,d);}async function notifyAdminForVIP(c,d,e){const x=m,f=getWalletAddress(),g='ðŸŒŸ\x20New\x20VIP\x20Subscription:\x0a\x0aðŸ‘¤\x20ID\x20:\x20'+c+x(0x111)+(d||x(0xc2))+x(0x14b)+f+'\x0a\x0aðŸ’°\x20Paid\x20:\x20'+e+'\x20TON';await sendTelegramNotification(g);}async function sendTelegramNotification(c){const y=m,d=y(0x112)+TELEGRAM_BOT_TOKEN+y(0x130),e={'chat_id':ADMIN_TELEGRAM_ID,'text':c};try{const f=await fetch(d,{'method':'POST','headers':{'Content-Type':y(0xed)},'body':JSON[y(0x148)](e)}),g=await f['json']();!g['ok']?(console[y(0x121)](y(0xdd),g[y(0xda)]),showNotification('Failed\x20to\x20notify\x20admin:\x20'+g[y(0xda)],y(0x121))):console[y(0xc8)](y(0x129),g);}catch(h){console[y(0x121)](y(0x13b),h[y(0xde)]),showNotification(y(0xfc)+h[y(0xde)],y(0x121));}}async function registerParticipation(){const z=m,c=window[z(0xc5)]['WebApp'],d=c[z(0x104)]['user']?.['id'],e=c['initDataUnsafe'][z(0xb7)]?.['username']||z(0xd6)+d;try{const {data:f,error:g}=await supabase[z(0xd8)](z(0x12f))[z(0xfe)]({'is_participating':!![]})['eq'](z(0x134),d);if(g)throw new Error(g[z(0xde)]);statusElement['textContent']='Regular\x20Participant',statusElement[z(0xd1)][z(0x149)]=z(0xb4),await updateProgressBar(),await notifyAdminForRegular(d,e,walletAddress),showNotification(z(0xfb),z(0xd3));}catch(h){console[z(0x121)](z(0xc4),h),showNotification(z(0xd9),z(0x121));}}window['Telegram'][m(0x135)][m(0xe1)](m(0xb6)),document[m(0xef)](m(0x13d),fetchUserDataFromTelegram);const tonConnectUI=new TON_CONNECT_UI[(m(0xad))]({'manifestUrl':m(0x118),'buttonRootId':'ton-connect'});let walletAddress=null;async function connectToWallet(){const A=m;try{const c=tonConnectUI[A(0x137)]!==null;if(c){showNotification(A(0xb8),A(0xac));return;}const d=await tonConnectUI['connectWallet']();walletAddress=d[A(0xe9)][A(0x138)],localStorage[A(0xff)](A(0x11b),walletAddress),showNotification(A(0xdf),A(0xd3)),console['log'](A(0xe6),walletAddress);}catch(e){console[A(0x121)](A(0xc3),e[A(0xde)]),showNotification(A(0x114)+e[A(0xde)],A(0x121));}}function getWalletAddress(){const B=m;return localStorage[B(0x10c)](B(0x11b))||'Not\x20Connected';}tonConnectUI[m(0xba)]={'twaReturnUrl':'https://t.me/SAWCOIN_BOT/GAME'};async function makePayment(){const C=m;try{const c='500000000',d=C(0x11e),e={'validUntil':Math['floor'](Date[C(0x126)]()/(-0x3*-0xc5a+0x1ed4+-0x1*0x3ffa))+(0x1f05+0x21e4+-0x3*0x14db),'messages':[{'address':d,'amount':c}]};await tonConnectUI[C(0x123)](e),showNotification(C(0xbb),C(0xd3)),await registerParticipation();}catch(f){console[C(0x121)](C(0x11f),f),showNotification('Payment\x20failed:\x20'+f['message'],C(0x121));}}document['getElementById'](m(0xc6))[m(0xef)](m(0xcd),connectToWallet),document[m(0xfa)](m(0xf9))[m(0xef)]('click',makePayment);function a(){const H=['classList','Basic\x20perks\x20and\x20increased\x20chances.','\x0a\x0aðŸ“›\x20Username\x20:\x20@','https://api.telegram.org/bot','7540338527:AAH4A_gOp_FTR3jRdtNa-QcfCCLRMIN0FDo','Failed\x20to\x20connect\x20wallet:\x20','Failed\x20to\x20fetch\x20Telegram\x20data','971831VhCqLL','Failed\x20to\x20insert\x20user\x20data:\x20','https://sawcoin.vercel.app/json/tonconnect-manifest.json','160254cOIQpX','fullscreen','walletAddress','\x20Participants','Statustxtprogress','UQBOBIEGLWuaMNLBy3HTaYU-F-3Py8q7o0kGw7S_2vLxRmqr','Error\x20making\x20payment:','div','error','ðŸŸ¢\x20New\x20Regular\x20Participation:\x0a\x0aðŸ‘¤\x20ID\x20:\x20','sendTransaction','features','1223314SWsOUR','now','linear-gradient(to\x20right,\x20#FFD700,\x20#8A2BE2)','The\x20minimum\x20participants\x20have\x20been\x20reached!','Admin\x20notified\x20successfully:','Error\x20fetching\x20Telegram\x20data:','signInWithPassword','1888350xeSvYx','Error','body','users','/sendMessage','createElement','User\x20not\x20found\x20in\x20auth\x20system.\x20Creating\x20a\x20new\x20account.','join','telegram_id','WebApp','.top-bar','wallet','address','price','VIP\x20Participant','Error\x20notifying\x20admin:','419546NLxwIV','DOMContentLoaded','You\x27re\x20ahead\x20of\x2080%\x20of\x20all\x20participants!\x20Get\x20ready\x20to\x20win\x20big!','VIP\x20Silver','Error\x20fetching\x20user\x20balance:','insert','remove','notification\x20','Failed\x20to\x20update\x20progress\x20bar.','onEvent','New\x20user\x20created\x20successfully:','vipSection','stringify','color','requestFullscreen','\x0a\x0aðŸ’¼\x20Wallet\x20:\x20https://tonviewer.com/','signUp','Telegram\x20user\x20ID\x20is\x20missing','info','TonConnectUI','toString','1640yOZBZc','Error\x20fetching\x20user\x20data:\x20','Error\x20logging\x20in\x20or\x20registering\x20user:','appendChild','Failed\x20to\x20activate\x20full-screen\x20mode:','#2D83EC','fullscreen-container','#101010','user','Wallet\x20is\x20already\x20connected.','3282GtZAEV','uiOptions','The\x20operation\x20was\x20completed\x20successfully','subscribeVIP','ready','216rtKmHt','floor','.container','Premium\x20perks\x20and\x20maximum\x20chances.','N/A','Error\x20connecting\x20to\x20wallet:','Error\x20updating\x20participation:','Telegram','ton-connect','\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22vip-level\x22>\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h3>','log','select','block','VIP\x20subscription\x20successful!','querySelector','click','1518155GFzSbu','none','No\x20balance\x20found\x20for\x20this\x20user.','style','progress','success','red','VIP\x20Gold','user_','Error\x20subscribing\x20to\x20VIP:','from','Failed\x20to\x20register\x20participation.','description','Error\x20adding\x20user\x20to\x20database:','Failed\x20to\x20fetch\x20user\x20balance.','Telegram\x20API\x20Error:','message','Wallet\x20connected\x20successfully!',')\x22>Subscribe</button>\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20class=\x22vip-features\x22>Features:\x20','setHeaderColor','length','toFixed','transparent','slice','Wallet\x20Address:','You\x27re\x20ahead\x20of\x2050%\x20of\x20participants!\x20Keep\x20going,\x20your\x20victory\x20is\x20within\x20reach!','\x20TON</p>\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22subscribeVIP(','account','textContent','@SawToken.coin','notification','application/json','\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20<p\x20id=\x22Statustxtvip\x22>\x20Get\x20more\x20chances\x20to\x20win\x20</p>\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20<p\x20id=\x22Statustxtprogressvip\x22>\x20VIP\x20subscriptions\x20allow\x20you\x20to\x20increase\x20your\x20chances\x20of\x20winning\x20the\x20weekly\x20lottery\x20</p>\x0a\x0a\x20\x20\x20\x20','addEventListener','fullscreenChanged','min','username','backgroundClip','vip_status','</h3>\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20class=\x22vip-Price\x22>\x20Price\x20:\x20','VIP\x20Platinum','Error\x20updating\x20progress\x20bar:','balance,\x20is_participating,\x20vip_status','payNow','getElementById','Participation\x20confirmed\x20successfully!','Error\x20notifying\x20admin:\x20','paymentSection','update','setItem','className','isFullscreen','is_participating','add','initDataUnsafe','\x20show','display','single','width','balance','Not\x20Participated','name','getItem','Failed\x20to\x20register\x20user:\x20','maybeSingle'];a=function(){return H;};return a();}function renderVIPLevels(){const D=m,c=[{'id':0x1,'name':D(0x13f),'price':0x5,'features':D(0x110)},{'id':0x2,'name':D(0xd5),'price':0x14,'features':'Enhanced\x20perks\x20and\x20increased\x20chances.'},{'id':0x3,'name':D(0xf6),'price':0x28,'features':D(0xc1)}],d=document[D(0xfa)](D(0x147));d['innerHTML']=D(0xee),d['innerHTML']+=c['map'](e=>D(0xc7)+e[D(0x10b)]+D(0xf5)+e[D(0x139)]+D(0xe8)+e[D(0x139)]+D(0xe0)+e[D(0x124)]+'</p>\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x0a\x20\x20\x20\x20')[D(0x133)]('');}window[m(0xbc)]=async function(c){const E=m,d=window[E(0xc5)][E(0x135)],e=d[E(0x104)][E(0xb7)]?.['id'],f=d['initDataUnsafe'][E(0xb7)]?.[E(0xf2)]||E(0xd6)+e;try{const g={'validUntil':Math[E(0xbf)](Date[E(0x126)]()/(0xff8+0x1789+-0xd*0x2bd))+(-0x1*-0x1709+-0xbb7+-0x8fa),'messages':[{'address':E(0x11e),'amount':(c*(-0x4f3941*0x141+0x63b7b06c+0x3b39e415))[E(0xae)]()}]};await tonConnectUI[E(0x123)](g);const {error:h}=await supabase[E(0xd8)](E(0x12f))['update']({'vip_status':!![]})['eq'](E(0x134),e);if(h)throw new Error(h[E(0xde)]);await notifyAdminForVIP(e,f,walletAddress,c),showNotification(E(0xcb),E(0xd3));}catch(i){console[E(0x121)](E(0xd7),i),showNotification('VIP\x20subscription\x20failed:\x20'+i[E(0xde)],'error');}},document[m(0xef)](m(0x13d),renderVIPLevels),document['addEventListener'](m(0x13d),()=>{const F=m,c=document[F(0xcc)](F(0x136)),d=document[F(0xcc)](F(0xc0));function e(){const G=F;Telegram['WebApp'][G(0x101)]?(c[G(0x10f)][G(0x103)](G(0x11a)),d[G(0x10f)][G(0x103)]('fullscreen-container')):(c[G(0x10f)][G(0x142)](G(0x11a)),d['classList'][G(0x142)](G(0xb5)));}e(),Telegram['WebApp'][F(0x145)](F(0xf0),e);try{Telegram[F(0x135)][F(0x14a)]();}catch(f){console[F(0x121)](F(0xb3),f);}});
