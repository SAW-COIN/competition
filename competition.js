const m=b;(function(c,d){const l=b,e=c();while(!![]){try{const f=-parseInt(l(0xba))/(-0xad*-0x2a+0xe*-0x32+-0x19a5)*(-parseInt(l(0xac))/(0x7b*0x1d+0x1*-0xeae+-0x1*-0xc1))+parseInt(l(0xd8))/(0x1*-0x1e4d+0x1*-0xe14+0x2c64)*(-parseInt(l(0xb0))/(0x278*0x2+-0x6*-0x167+-0xd56))+-parseInt(l(0xa9))/(-0x898*0x2+0x1ad4*-0x1+0x1*0x2c09)*(-parseInt(l(0xb6))/(0x1094+0x283*0x2+-0x1594))+-parseInt(l(0xe4))/(-0x2*-0xbad+-0x1b1d+-0x5*-0xc2)+parseInt(l(0x86))/(-0x139*0x9+0x1*0x207a+-0x1571)*(-parseInt(l(0x7e))/(-0x1*-0x1a19+0x1*0x1+0x1*-0x1a11))+parseInt(l(0x84))/(0xf3a*0x1+0x15e8+-0x2518)*(-parseInt(l(0x9b))/(-0x1*-0x1ee8+-0x1*-0x13d7+-0x32b4))+-parseInt(l(0xad))/(-0xa4b+-0x112d+-0x1*-0x1b84)*(-parseInt(l(0xf0))/(-0x948+-0x153a+0x1e8f*0x1));if(f===d)break;else e['push'](e['shift']());}catch(g){e['push'](e['shift']());}}}(a,-0x1*0x15c371+-0x3bb7*-0x4+0x52*0x64bd));const TELEGRAM_BOT_TOKEN=m(0xc8),ADMIN_TELEGRAM_ID=0x241fa7660+-0x1a2ae30a2+0xf5a12b7e,paymentSection=document[m(0x9f)](m(0xaf)),usernameElement=document['getElementById'](m(0xf9)),balanceElement=document[m(0x9f)]('balance'),statusElement=document[m(0x9f)]('participationStatus'),progressBar=document['getElementById'](m(0xc1)),progressText=document['getElementById'](m(0xde)),notification=document['createElement'](m(0xf4));notification['className']=m(0xf1),document['body']['appendChild'](notification);function showNotification(c,d='error'){const n=m;notification[n(0xd6)]=c,notification['className']=n(0xf7)+d+n(0xaa),setTimeout(()=>{const o=n;notification[o(0xe8)]=o(0xf1);},-0x1438+-0x44b*-0x2+-0x62*-0x3d);}function formatUsername(c){const p=m,d=0x1*0xe3a+-0x25f3+0x17be;return c[p(0xe3)]>d?c['slice'](0x1d3d+0x517*-0x1+0x232*-0xb,d)+'...':c;}function formatBalance(c){const q=m;if(c>=0x2ab*-0xb2fd25d+0xa4*0x24c9250e5+-0x7260808495)return(c/(-0x142d2*-0x2b7573+0x1*-0x589931e66c+0x10aa075f816))[q(0xa6)](0xd*-0x2a5+-0x1e83+-0x736*-0x9)+'T';else{if(c>=0xb81f11*0x4f+-0x4972e71b+-0x4*-0x130f06b7)return(c/(-0x681b0791+-0x3*0x70d6d4b+0xb8de1972))[q(0xa6)](0x24fa+0x1242+0x2*-0x1b9d)+'B';else{if(c>=0x152a55+0xe9c2c+-0x148441)return(c/(-0x35c*0x48f+0x166c6d*0x1+0x82637))[q(0xa6)](0x91*0x17+-0xc01+-0x1*0x104)+'M';else{if(c>=-0x14*0x83+0xc17+-0x20d*-0x1)return(c/(-0x1ef1+0x1ec1+-0x418*-0x1))[q(0xa6)](-0x1fd1+-0xf02+0x2ed5)+'K';}}}return c[q(0xe1)]();}async function loginUser(c){const r=m,d=c+r(0x94),e=r(0x7c)+c;try{const {data:f,error:g}=await supabase[r(0xcd)][r(0x7d)]({'email':d,'password':e});if(g){console[r(0xe6)]('User\x20not\x20found\x20in\x20auth\x20system.\x20Creating\x20a\x20new\x20account.');const {data:h,error:i}=await supabase[r(0xcd)][r(0x107)]({'email':d,'password':e});if(i)throw new Error(r(0x8f)+i[r(0xf3)]);return console[r(0xe6)](r(0x8e),h[r(0xdb)]['id']),{'telegramId':c,'email':d};}return console[r(0xe6)]('User\x20logged\x20in\x20successfully:',f[r(0xdb)]),{'telegramId':c,'email':d};}catch(j){console[r(0xa3)](r(0xe2),j[r(0xf3)]);throw j;}}async function addUserToDatabase(c,d){const s=m;try{const {data:e,error:f}=await supabase[s(0xb7)]('users')[s(0xe9)]('*')['eq']('telegram_id',c)[s(0xdc)]();if(f)throw new Error(s(0x92)+f[s(0xf3)]);if(!e){console[s(0xe6)](s(0xb1));const {error:g}=await supabase[s(0xb7)](s(0xd5))[s(0xbd)]({'telegram_id':c,'email':d,'is_participating':![],'vip_status':![]});if(g)throw new Error('Failed\x20to\x20insert\x20user\x20data:\x20'+g[s(0xf3)]);}}catch(h){console[s(0xa3)](s(0x93),h[s(0xf3)]);throw h;}}function a(){const F=['connectWallet','className','select','\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22vip-level\x22>\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h3>','addEventListener','sendTransaction','setItem','info','VIP\x20Gold','13VXAFUD','notification','vip_status','message','div','ðŸŒŸ\x20New\x20VIP\x20Subscription:\x0a\x0aðŸ‘¤\x20ID\x20:\x20','click','notification\x20','subscribeVIP','username','\x0a\x0aðŸ’¼\x20Wallet\x20:\x20https://tonviewer.com/','Wallet\x20Address:','backgroundImage','https://t.me/SAWCOIN_BOT/GAME','setHeaderColor','vipSection','#2D83EC','Failed\x20to\x20update\x20progress\x20bar.','transparent','The\x20minimum\x20participants\x20have\x20been\x20reached!','Error\x20updating\x20progress\x20bar:','DOMContentLoaded','POST','signUp','password_','signInWithPassword','10382121oJfoVS','update','uiOptions','Telegram','single','map','454670MoRZCU','Error\x20making\x20payment:','8cDDlOf','payNow','\x20Participants','50000','block','stringify','Error\x20updating\x20participation:','Failed\x20to\x20notify\x20admin:\x20','New\x20user\x20created\x20successfully:','Failed\x20to\x20register\x20user:\x20','Not\x20Participated','ton-connect','Error\x20fetching\x20user\x20data:\x20','Error\x20adding\x20user\x20to\x20database:','@SawToken.coin','TonConnectUI','Participation\x20confirmed\x20successfully!','\x0a\x0aðŸ’°\x20Paid\x20:\x20','none','VIP\x20subscription\x20failed:\x20','innerHTML','319PMrfCt','WebApp','No\x20balance\x20found\x20for\x20this\x20user.','\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20<p\x20id=\x22Statustxtvip\x22>\x20Get\x20more\x20chances\x20to\x20win\x20</p>\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20<p\x20id=\x22Statustxtprogressvip\x22>\x20VIP\x20subscriptions\x20allow\x20you\x20to\x20increase\x20your\x20chances\x20of\x20winning\x20the\x20weekly\x20lottery\x20</p>\x0a\x0a\x20\x20\x20\x20','getElementById','Telegram\x20user\x20ID\x20is\x20missing','VIP\x20subscription\x20successful!','telegram_id','error','You\x27re\x20ahead\x20of\x2080%\x20of\x20all\x20participants!\x20Get\x20ready\x20to\x20win\x20big!','name','toFixed','is_participating','walletAddress','10bPPJka','\x20show','https://sawcoin.vercel.app/json/tonconnect-manifest.json','4DknpSS','45021828ydnzAF','Premium\x20perks\x20and\x20maximum\x20chances.','paymentSection','4rTXzrh','No\x20user\x20data\x20found\x20in\x20database.\x20Adding\x20user.','initDataUnsafe','style','display','Failed\x20to\x20register\x20participation.','2248374EZtpkO','from','Statustxtprogress','Error\x20fetching\x20Telegram\x20data:','231199ILhDyy','Payment\x20failed:\x20','wallet','insert','/sendMessage','join','Failed\x20to\x20fetch\x20user\x20balance.','progress','description','color','success','min','address','ðŸŸ¢\x20New\x20Regular\x20Participation:\x0a\x0aðŸ‘¤\x20ID\x20:\x20','7540338527:AAH4A_gOp_FTR3jRdtNa-QcfCCLRMIN0FDo','Regular\x20Participant','</h3>\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20class=\x22vip-Price\x22>\x20Price\x20:\x20','The\x20operation\x20was\x20completed\x20successfully','VIP\x20Platinum','auth',')\x22>Subscribe</button>\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20class=\x22vip-features\x22>Features:\x20','floor','N/A','\x20TON</p>\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22subscribeVIP(','user_','#101010','backgroundClip','users','textContent','Error','1496373Yibixn','Error\x20notifying\x20admin:','now','user','maybeSingle','Error\x20notifying\x20admin:\x20','participantCount','price','getItem','toString','Error\x20logging\x20in\x20or\x20registering\x20user:','length','8702505uLXRJS','\x0a\x0aðŸ“›\x20Username\x20:\x20@','log'];a=function(){return F;};return a();}async function fetchUserDataFromTelegram(){const t=m;try{const c=window['Telegram'][t(0x9c)];c['ready']();const d=c['initDataUnsafe']['user']?.['id'];if(!d)throw new Error(t(0xa0));const e=c[t(0xb2)][t(0xdb)]?.[t(0xf9)]||t(0xd2)+d;usernameElement[t(0xd6)]=formatUsername(e);const f=d+t(0x94),g=await loginUser(d);await addUserToDatabase(d,f),await fetchUserBalance(d),await updateProgressBar();}catch(h){console[t(0xa3)](t(0xb9),h['message']),showNotification(h[t(0xf3)]||'Failed\x20to\x20fetch\x20Telegram\x20data','error');}}async function fetchUserBalance(c){const u=m;try{const {data:d,error:e}=await supabase[u(0xb7)](u(0xd5))[u(0xe9)]('balance,\x20is_participating,\x20vip_status')['eq'](u(0xa2),c)[u(0x82)]();if(e)throw new Error(e[u(0xf3)]);if(d){balanceElement['textContent']=formatBalance(d['balance']);const f=document[u(0x9f)](u(0xb8));if(d[u(0xf2)])statusElement[u(0xd6)]='VIP\x20Participant',statusElement[u(0xb3)][u(0xfc)]='linear-gradient(to\x20right,\x20#FFD700,\x20#8A2BE2)',statusElement[u(0xb3)]['color']=u(0x102),statusElement[u(0xb3)][u(0xd4)]='text',f[u(0xd6)]=u(0xa4),paymentSection[u(0xb3)][u(0xb4)]=u(0x98),document['getElementById'](u(0xff))[u(0xb3)][u(0xb4)]=u(0x98);else d[u(0xa7)]?(statusElement[u(0xd6)]=u(0xc9),statusElement[u(0xb3)][u(0xc3)]=u(0x100),f[u(0xd6)]='You\x27re\x20ahead\x20of\x2050%\x20of\x20participants!\x20Keep\x20going,\x20your\x20victory\x20is\x20within\x20reach!',paymentSection[u(0xb3)][u(0xb4)]=u(0x98)):(statusElement[u(0xd6)]=u(0x90),statusElement[u(0xb3)][u(0xc3)]='red',f['textContent']='You\x20have\x20no\x20chances\x20to\x20win!\x20Join\x20now\x20and\x20seize\x20your\x20opportunity!',paymentSection[u(0xb3)][u(0xb4)]=u(0x8a));}else balanceElement[u(0xd6)]='0',showNotification(u(0x9d),u(0xa3));}catch(g){console[u(0xa3)]('Error\x20fetching\x20user\x20balance:',g),balanceElement[u(0xd6)]=u(0xd7),showNotification(u(0xc0),u(0xa3));}}async function updateProgressBar(){const v=m;try{const {data:c,error:d}=await supabase[v(0xb7)](v(0xd5))[v(0xe9)]('*')['eq']('is_participating',!![]);if(d)throw new Error(d[v(0xf3)]);const {data:e,error:f}=await supabase[v(0xb7)]('users')['select']('*')['eq'](v(0xf2),!![]);if(f)throw new Error(f[v(0xf3)]);const g=-0x14b9+0x100a+0x8c9,h=c[v(0xe3)]+e[v(0xe3)]*(0x2*-0x61+0x182b+0x2*-0xbb2)+g,i=0x7*0x6a3+0x2ca4+-0x3bd9,j=Math[v(0xc5)](h/ i*(0x5c6*-0x4+0x73c*0x1+0x1040),0x89e*0x3+0x1af0+0x161*-0x26);progressText['textContent']=h+v(0x88),progressBar['style']['width']=j+'%',h>=i&&showNotification(v(0x103),v(0xc4));}catch(k){console[v(0xa3)](v(0x104),k),showNotification(v(0x101),v(0xa3));}}import{createClient}from'https://cdn.jsdelivr.net/npm/@supabase/supabase-js/+esm';import{SUPABASE_URL,SUPABASE_ANON_KEY}from'./Scripts/config.js';const supabase=createClient(SUPABASE_URL,SUPABASE_ANON_KEY);async function notifyAdminForRegular(c,d){const w=m,e=getWalletAddress(),f=w(0xc7)+c+w(0xe5)+(d||w(0xd0))+w(0xfa)+e;await sendTelegramNotification(f);}async function notifyAdminForVIP(c,d,e){const x=m,f=getWalletAddress(),g=x(0xf5)+c+x(0xe5)+(d||x(0xd0))+x(0xfa)+f+x(0x97)+e+'\x20TON';await sendTelegramNotification(g);}async function sendTelegramNotification(c){const y=m,d='https://api.telegram.org/bot'+TELEGRAM_BOT_TOKEN+y(0xbe),e={'chat_id':ADMIN_TELEGRAM_ID,'text':c};try{const f=await fetch(d,{'method':y(0x106),'headers':{'Content-Type':'application/json'},'body':JSON[y(0x8b)](e)}),g=await f['json']();!g['ok']?(console['error']('Telegram\x20API\x20Error:',g[y(0xc2)]),showNotification(y(0x8d)+g[y(0xc2)],y(0xa3))):console[y(0xe6)]('Admin\x20notified\x20successfully:',g);}catch(h){console['error'](y(0xd9),h[y(0xf3)]),showNotification(y(0xdd)+h[y(0xf3)],y(0xa3));}}async function registerParticipation(){const z=m,c=window[z(0x81)][z(0x9c)],d=c[z(0xb2)][z(0xdb)]?.['id'],e=c['initDataUnsafe'][z(0xdb)]?.[z(0xf9)]||z(0xd2)+d;try{const {data:f,error:g}=await supabase[z(0xb7)](z(0xd5))[z(0x7f)]({'is_participating':!![]})['eq']('telegram_id',d);if(g)throw new Error(g['message']);statusElement[z(0xd6)]='Regular\x20Participant',statusElement[z(0xb3)][z(0xc3)]='#2D83EC',await updateProgressBar(),await notifyAdminForRegular(d,e,walletAddress),showNotification(z(0x96),z(0xc4));}catch(h){console[z(0xa3)](z(0x8c),h),showNotification(z(0xb5),'error');}}window[m(0x81)][m(0x9c)][m(0xfe)](m(0xd3)),document[m(0xeb)](m(0x105),fetchUserDataFromTelegram);const tonConnectUI=new TON_CONNECT_UI[(m(0x95))]({'manifestUrl':m(0xab),'buttonRootId':m(0x91)});let walletAddress=null;async function connectToWallet(){const A=m;try{const c=tonConnectUI[A(0xbc)]!==null;if(c){showNotification('Wallet\x20is\x20already\x20connected.',A(0xee));return;}const d=await tonConnectUI[A(0xe7)]();walletAddress=d['account'][A(0xc6)],localStorage[A(0xed)](A(0xa8),walletAddress),showNotification('Wallet\x20connected\x20successfully!','success'),console['log'](A(0xfb),walletAddress);}catch(e){console[A(0xa3)]('Error\x20connecting\x20to\x20wallet:',e[A(0xf3)]),showNotification('Failed\x20to\x20connect\x20wallet:\x20'+e['message'],A(0xa3));}}function getWalletAddress(){const B=m;return localStorage[B(0xe0)](B(0xa8))||'Not\x20Connected';}tonConnectUI[m(0x80)]={'twaReturnUrl':m(0xfd)};function b(c,d){const e=a();return b=function(f,g){f=f-(0x3f7+0x26b*-0xd+0x1bf4);let h=e[f];return h;},b(c,d);}async function makePayment(){const C=m;try{const c=C(0x89),d='UQBOBIEGLWuaMNLBy3HTaYU-F-3Py8q7o0kGw7S_2vLxRmqr',e={'validUntil':Math[C(0xcf)](Date[C(0xda)]()/(-0x233*0x8+-0xf9*0x1f+0x33a7))+(-0x1015+0xcf*-0x10+-0x1*-0x1f5d),'messages':[{'address':d,'amount':c}]};await tonConnectUI[C(0xec)](e),showNotification(C(0xcb),C(0xc4)),await registerParticipation();}catch(f){console[C(0xa3)](C(0x85),f),showNotification(C(0xbb)+f['message'],'error');}}document['getElementById']('ton-connect')[m(0xeb)](m(0xf6),connectToWallet),document['getElementById'](m(0x87))[m(0xeb)](m(0xf6),makePayment);function renderVIPLevels(){const D=m,c=[{'id':0x1,'name':'VIP\x20Silver','price':0.000005,'features':'Basic\x20perks\x20and\x20increased\x20chances.'},{'id':0x2,'name':D(0xef),'price':0x14,'features':'Enhanced\x20perks\x20and\x20increased\x20chances.'},{'id':0x3,'name':D(0xcc),'price':0x28,'features':D(0xae)}],d=document[D(0x9f)](D(0xff));d[D(0x9a)]=D(0x9e),d[D(0x9a)]+=c[D(0x83)](e=>D(0xea)+e[D(0xa5)]+D(0xca)+e[D(0xdf)]+D(0xd1)+e[D(0xdf)]+D(0xce)+e['features']+'</p>\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x0a\x20\x20\x20\x20')[D(0xbf)]('');}window[m(0xf8)]=async function(c){const E=m,d=window[E(0x81)][E(0x9c)],e=d[E(0xb2)][E(0xdb)]?.['id'],f=d[E(0xb2)][E(0xdb)]?.[E(0xf9)]||E(0xd2)+e;try{const g={'validUntil':Math['floor'](Date[E(0xda)]()/(0x2430+-0x11*-0x148+-0x3610))+(0x1fe1+0x4ed+0x16*-0x191),'messages':[{'address':'UQBOBIEGLWuaMNLBy3HTaYU-F-3Py8q7o0kGw7S_2vLxRmqr','amount':(c*(-0x4a1176*0xdf+-0x2*0x2b908857+0x341d2*0x40dc))['toString']()}]};await tonConnectUI[E(0xec)](g);const {error:h}=await supabase[E(0xb7)](E(0xd5))[E(0x7f)]({'vip_status':!![]})['eq'](E(0xa2),e);if(h)throw new Error(h[E(0xf3)]);await notifyAdminForVIP(e,f,walletAddress,c),showNotification(E(0xa1),E(0xc4));}catch(i){console[E(0xa3)]('Error\x20subscribing\x20to\x20VIP:',i),showNotification(E(0x99)+i[E(0xf3)],'error');}},document['addEventListener'](m(0x105),renderVIPLevels);
