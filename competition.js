const m=b;(function(c,d){const l=b,e=c();while(!![]){try{const f=parseInt(l(0x1ff))/(0x175*0x2+0x1*0x2023+-0x230c)+-parseInt(l(0x18b))/(0x108e+0x2204+0x1*-0x3290)+parseInt(l(0x1fc))/(-0x24bf+-0x1c0b+-0x1*-0x40cd)+-parseInt(l(0x1da))/(-0x2f3+0x1ce1+-0x19ea)+-parseInt(l(0x1fa))/(0x5*0x241+-0x36e*0x6+0x954)*(parseInt(l(0x1c1))/(0x1b3d+0x611*-0x5+-0x7*-0x72))+-parseInt(l(0x20c))/(-0x2*-0xbe3+0x1394+0xe71*-0x3)+parseInt(l(0x1c2))/(0x1635+0x170*0xb+-0x25fd)*(parseInt(l(0x1f9))/(0x256c+-0x159a+-0xfc9));if(f===d)break;else e['push'](e['shift']());}catch(g){e['push'](e['shift']());}}}(a,0x1*0x9bf6+-0x7*0x153c5+0xe2187));const TELEGRAM_BOT_TOKEN='7540338527:AAH4A_gOp_FTR3jRdtNa-QcfCCLRMIN0FDo',ADMIN_TELEGRAM_ID=0x2dc03b*-0xf02+0x7b79f4e*0x47+-0x43f3e702*-0x8,paymentSection=document[m(0x1ea)](m(0x1e0)),usernameElement=document[m(0x1ea)](m(0x18f)),balanceElement=document[m(0x1ea)](m(0x1b7)),statusElement=document[m(0x1ea)](m(0x1f7)),progressBar=document[m(0x1ea)](m(0x201)),progressText=document[m(0x1ea)](m(0x1fe)),notification=document[m(0x18a)](m(0x1bc));notification['className']='notification',document['body'][m(0x1df)](notification);function showNotification(c,d=m(0x193)){const n=m;notification[n(0x202)]=c,notification[n(0x206)]=n(0x1b8)+d+n(0x1ee),setTimeout(()=>{const o=n;notification['className']=o(0x19e);},-0x127f*-0x1+0x1*0x2018+-0x1*0x26df);}function formatUsername(c){const p=m,d=-0x1bfe*-0x1+-0x2*0x6aa+0x17*-0xa3;return c[p(0x1f6)]>d?c[p(0x213)](-0x529+0x20*-0x85+-0xb*-0x1fb,d)+'...':c;}function formatBalance(c){const q=m;if(c>=0x1b880902e82+0x1b89cde3613+-0x28848c95495)return(c/(0x535baa764e+0x65c25a59a5+0x282e0035f*0x13))[q(0x1de)](0x6e2*0x1+-0x2461+-0x437*-0x7)+'T';else{if(c>=0x57*0xc905f5+0xe783*0x502d+0x43bd6*-0x132f)return(c/(0x13*-0x2802e27+0x7e75*-0x3905+0x8748bc2e))[q(0x1de)](-0x157f+-0x1633+0x2bb4)+'B';else{if(c>=0x14de12+0xf9543+-0x1b43*0xc7)return(c/(0x2*-0x7371b+0x1b0dfb+-0x1*-0x2a27b))[q(0x1de)](0x1f97*0x1+-0x59f+-0xcfb*0x2)+'M';else{if(c>=0x21ef+0x3c*-0x48+-0xd27)return(c/(0x54d*-0x6+-0x16b7*0x1+0x3a6d))[q(0x1de)](0x3fb*-0x9+-0x1b7c+0x3f51)+'K';}}}return c[q(0x1b3)]();}function b(c,d){const e=a();return b=function(f,g){f=f-(0xfbb+-0xc32+-0x203*0x1);let h=e[f];return h;},b(c,d);}async function loginUser(c){const r=m,d=c+r(0x1be),e='password_'+c;try{const {data:f,error:g}=await supabase[r(0x1ac)][r(0x1c9)]({'email':d,'password':e});if(g){console['log']('User\x20not\x20found\x20in\x20auth\x20system.\x20Creating\x20a\x20new\x20account.');const {data:h,error:i}=await supabase[r(0x1ac)][r(0x1fd)]({'email':d,'password':e});if(i)throw new Error('Failed\x20to\x20register\x20user:\x20'+i[r(0x212)]);return console['log']('New\x20user\x20created\x20successfully:',h[r(0x1cd)]['id']),{'telegramId':c,'email':d};}return console[r(0x1e4)](r(0x1a1),f[r(0x1cd)]),{'telegramId':c,'email':d};}catch(j){console[r(0x193)]('Error\x20logging\x20in\x20or\x20registering\x20user:',j[r(0x212)]);throw j;}}async function addUserToDatabase(c,d){const s=m;try{const {data:e,error:f}=await supabase[s(0x1a8)]('users')[s(0x1c8)]('*')['eq'](s(0x1af),c)[s(0x1b1)]();if(f)throw new Error(s(0x199)+f[s(0x212)]);if(!e){console[s(0x1e4)](s(0x18e));const {error:g}=await supabase[s(0x1a8)]('users')[s(0x1ad)]({'telegram_id':c,'email':d,'is_participating':![],'vip_status':![]});if(g)throw new Error('Failed\x20to\x20insert\x20user\x20data:\x20'+g[s(0x212)]);}}catch(h){console['error']('Error\x20adding\x20user\x20to\x20database:',h[s(0x212)]);throw h;}}function a(){const H=['transparent','Basic\x20perks\x20and\x20increased\x20chances.','features','You\x27re\x20ahead\x20of\x2050%\x20of\x20participants!\x20Keep\x20going,\x20your\x20victory\x20is\x20within\x20reach!','.container','floor',')\x22>Subscribe</button>\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20class=\x22vip-features\x22>Features:\x20','now','WebApp','backgroundClip','info','Telegram','2355624GxoKmN','\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22vip-level\x22>\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h3>','users','none','toFixed','appendChild','paymentSection','Error\x20updating\x20progress\x20bar:','.top-bar','UQBOBIEGLWuaMNLBy3HTaYU-F-3Py8q7o0kGw7S_2vLxRmqr','log','is_participating','\x0a\x0aðŸ’¼\x20Wallet\x20:\x20https://tonviewer.com/','subscribeVIP','Failed\x20to\x20fetch\x20Telegram\x20data','success','getElementById','min','The\x20operation\x20was\x20completed\x20successfully','account','\x20show','onEvent','json','name','update','balance,\x20is_participating,\x20vip_status','Error','Premium\x20perks\x20and\x20maximum\x20chances.','length','participationStatus','remove','9JNcfan','10TFBhDK','Telegram\x20API\x20Error:','1072464xAfuMQ','signUp','participantCount','401793HsFVhW','text','progress','textContent','Wallet\x20Address:','add','Failed\x20to\x20register\x20participation.','className','Error\x20making\x20payment:','stringify','payNow','POST','\x20TON','4143643zCHxfq','VIP\x20subscription\x20successful!','ton-connect','red','\x20Participants','Failed\x20to\x20activate\x20full-screen\x20mode:','message','slice','wallet','linear-gradient(to\x20right,\x20#FFD700,\x20#8A2BE2)','50000','address','Payment\x20failed:\x20','Regular\x20Participant','createElement','44370jseIoW','description','innerHTML','No\x20user\x20data\x20found\x20in\x20database.\x20Adding\x20user.','username','#2D83EC','</p>\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x0a\x20\x20\x20\x20','TonConnectUI','error','join','price','/sendMessage','color','https://sawcoin.vercel.app/json/tonconnect-manifest.json','Error\x20fetching\x20user\x20data:\x20','click','Failed\x20to\x20update\x20progress\x20bar.','Wallet\x20is\x20already\x20connected.','walletAddress','notification','width','addEventListener','User\x20logged\x20in\x20successfully:','setItem','Failed\x20to\x20fetch\x20user\x20balance.','sendTransaction','You\x27re\x20ahead\x20of\x2080%\x20of\x20all\x20participants!\x20Get\x20ready\x20to\x20win\x20big!','Error\x20notifying\x20admin:','map','from','initDataUnsafe','Error\x20subscribing\x20to\x20VIP:','classList','auth','insert','VIP\x20Platinum','telegram_id','querySelector','maybeSingle','N/A','toString','connectWallet','VIP\x20Silver','\x0a\x0aðŸ’°\x20Paid\x20:\x20','balance','notification\x20','VIP\x20Gold','Error\x20fetching\x20Telegram\x20data:','Failed\x20to\x20notify\x20admin:\x20','div','No\x20balance\x20found\x20for\x20this\x20user.','@SawToken.coin','fullscreen','\x0a\x0aðŸ“›\x20Username\x20:\x20@','323508MQLgqQ','7269928lTmYxF','Error\x20notifying\x20admin:\x20','style','Not\x20Connected','Error\x20connecting\x20to\x20wallet:','https://t.me/SAWCOIN_BOT/GAME','select','signInWithPassword','DOMContentLoaded','user_','display','user'];a=function(){return H;};return a();}async function fetchUserDataFromTelegram(){const t=m;try{const c=window['Telegram'][t(0x1d6)];c['ready']();const d=c[t(0x1a9)][t(0x1cd)]?.['id'];if(!d)throw new Error('Telegram\x20user\x20ID\x20is\x20missing');const e=c['initDataUnsafe'][t(0x1cd)]?.[t(0x18f)]||t(0x1cb)+d;usernameElement[t(0x202)]=formatUsername(e);const f=d+t(0x1be),g=await loginUser(d);await addUserToDatabase(d,f),await fetchUserBalance(d),await updateProgressBar();}catch(h){console['error'](t(0x1ba),h[t(0x212)]),showNotification(h[t(0x212)]||t(0x1e8),t(0x193));}}async function fetchUserBalance(c){const u=m;try{const {data:d,error:e}=await supabase[u(0x1a8)](u(0x1dc))[u(0x1c8)](u(0x1f3))['eq'](u(0x1af),c)['single']();if(e)throw new Error(e[u(0x212)]);if(d){balanceElement[u(0x202)]=formatBalance(d[u(0x1b7)]);const f=document[u(0x1ea)]('Statustxtprogress');if(d['vip_status'])statusElement[u(0x202)]='VIP\x20Participant',statusElement['style']['backgroundImage']=u(0x215),statusElement['style']['color']=u(0x1ce),statusElement[u(0x1c4)][u(0x1d7)]=u(0x200),f[u(0x202)]=u(0x1a5),paymentSection[u(0x1c4)][u(0x1cc)]=u(0x1dd),document[u(0x1ea)]('vipSection')[u(0x1c4)][u(0x1cc)]=u(0x1dd);else d[u(0x1e5)]?(statusElement['textContent']=u(0x189),statusElement['style'][u(0x197)]='#2D83EC',f[u(0x202)]=u(0x1d1),paymentSection[u(0x1c4)][u(0x1cc)]=u(0x1dd)):(statusElement[u(0x202)]='Not\x20Participated',statusElement[u(0x1c4)][u(0x197)]=u(0x20f),f[u(0x202)]='You\x20have\x20no\x20chances\x20to\x20win!\x20Join\x20now\x20and\x20seize\x20your\x20opportunity!',paymentSection[u(0x1c4)][u(0x1cc)]='block');}else balanceElement['textContent']='0',showNotification(u(0x1bd),'error');}catch(g){console[u(0x193)]('Error\x20fetching\x20user\x20balance:',g),balanceElement[u(0x202)]=u(0x1f4),showNotification(u(0x1a3),'error');}}async function updateProgressBar(){const v=m;try{const {data:c,error:d}=await supabase[v(0x1a8)](v(0x1dc))[v(0x1c8)]('*')['eq'](v(0x1e5),!![]);if(d)throw new Error(d[v(0x212)]);const {data:e,error:f}=await supabase['from'](v(0x1dc))[v(0x1c8)]('*')['eq']('vip_status',!![]);if(f)throw new Error(f[v(0x212)]);const g=0x1a7*0x1+-0x2*-0x9d3+0x103*-0x11,h=c['length']+e[v(0x1f6)]*(-0x9c0+0x152*0x3+0x5cf*0x1)+g,i=-0x3c5c+0x251*0xb+-0x4221*-0x1,j=Math[v(0x1eb)](h/ i*(0xcd5+-0x949*0x3+-0xf6a*-0x1),-0x21c+-0xb13+0xd93);progressText['textContent']=h+v(0x210),progressBar['style'][v(0x19f)]=j+'%',h>=i&&showNotification('The\x20minimum\x20participants\x20have\x20been\x20reached!',v(0x1e9));}catch(k){console[v(0x193)](v(0x1e1),k),showNotification(v(0x19b),'error');}}import{createClient}from'https://cdn.jsdelivr.net/npm/@supabase/supabase-js/+esm';import{SUPABASE_URL,SUPABASE_ANON_KEY}from'./Scripts/config.js';const supabase=createClient(SUPABASE_URL,SUPABASE_ANON_KEY);async function notifyAdminForRegular(c,d){const w=m,e=getWalletAddress(),f='ðŸŸ¢\x20New\x20Regular\x20Participation:\x0a\x0aðŸ‘¤\x20ID\x20:\x20'+c+w(0x1c0)+(d||w(0x1b2))+w(0x1e6)+e;await sendTelegramNotification(f);}async function notifyAdminForVIP(c,d,e){const x=m,f=getWalletAddress(),g='ðŸŒŸ\x20New\x20VIP\x20Subscription:\x0a\x0aðŸ‘¤\x20ID\x20:\x20'+c+x(0x1c0)+(d||x(0x1b2))+x(0x1e6)+f+x(0x1b6)+e+x(0x20b);await sendTelegramNotification(g);}async function sendTelegramNotification(c){const y=m,d='https://api.telegram.org/bot'+TELEGRAM_BOT_TOKEN+y(0x196),e={'chat_id':ADMIN_TELEGRAM_ID,'text':c};try{const f=await fetch(d,{'method':y(0x20a),'headers':{'Content-Type':'application/json'},'body':JSON[y(0x208)](e)}),g=await f[y(0x1f0)]();!g['ok']?(console[y(0x193)](y(0x1fb),g['description']),showNotification(y(0x1bb)+g[y(0x18c)],'error')):console['log']('Admin\x20notified\x20successfully:',g);}catch(h){console['error'](y(0x1a6),h[y(0x212)]),showNotification(y(0x1c3)+h[y(0x212)],y(0x193));}}async function registerParticipation(){const z=m,c=window[z(0x1d9)][z(0x1d6)],d=c[z(0x1a9)][z(0x1cd)]?.['id'],e=c['initDataUnsafe'][z(0x1cd)]?.[z(0x18f)]||'user_'+d;try{const {data:f,error:g}=await supabase[z(0x1a8)]('users')[z(0x1f2)]({'is_participating':!![]})['eq'](z(0x1af),d);if(g)throw new Error(g[z(0x212)]);statusElement[z(0x202)]=z(0x189),statusElement['style']['color']=z(0x190),await updateProgressBar(),await notifyAdminForRegular(d,e,walletAddress),showNotification('Participation\x20confirmed\x20successfully!',z(0x1e9));}catch(h){console[z(0x193)]('Error\x20updating\x20participation:',h),showNotification(z(0x205),z(0x193));}}window['Telegram'][m(0x1d6)]['setHeaderColor']('#101010'),document[m(0x1a0)](m(0x1ca),fetchUserDataFromTelegram);const tonConnectUI=new TON_CONNECT_UI[(m(0x192))]({'manifestUrl':m(0x198),'buttonRootId':'ton-connect'});let walletAddress=null;async function connectToWallet(){const A=m;try{const c=tonConnectUI[A(0x214)]!==null;if(c){showNotification(A(0x19c),A(0x1d8));return;}const d=await tonConnectUI[A(0x1b4)]();walletAddress=d[A(0x1ed)][A(0x187)],localStorage[A(0x1a2)](A(0x19d),walletAddress),showNotification('Wallet\x20connected\x20successfully!',A(0x1e9)),console[A(0x1e4)](A(0x203),walletAddress);}catch(e){console[A(0x193)](A(0x1c6),e[A(0x212)]),showNotification('Failed\x20to\x20connect\x20wallet:\x20'+e[A(0x212)],A(0x193));}}function getWalletAddress(){const B=m;return localStorage['getItem'](B(0x19d))||B(0x1c5);}tonConnectUI['uiOptions']={'twaReturnUrl':m(0x1c7)};async function makePayment(){const C=m;try{const c=C(0x186),d=C(0x1e3),e={'validUntil':Math[C(0x1d3)](Date[C(0x1d5)]()/(-0x1ff3*-0x1+0x13d7+-0x2fe2))+(0x501+-0x5*-0x634+0x25*-0xe9),'messages':[{'address':d,'amount':c}]};await tonConnectUI[C(0x1a4)](e),showNotification(C(0x1ec),C(0x1e9)),await registerParticipation();}catch(f){console[C(0x193)](C(0x207),f),showNotification(C(0x188)+f[C(0x212)],'error');}}document[m(0x1ea)](m(0x20e))[m(0x1a0)]('click',connectToWallet),document['getElementById'](m(0x209))[m(0x1a0)](m(0x19a),makePayment);function renderVIPLevels(){const D=m,c=[{'id':0x1,'name':D(0x1b5),'price':0.000005,'features':D(0x1cf)},{'id':0x2,'name':D(0x1b9),'price':0x14,'features':'Enhanced\x20perks\x20and\x20increased\x20chances.'},{'id':0x3,'name':D(0x1ae),'price':0x28,'features':D(0x1f5)}],d=document[D(0x1ea)]('vipSection');d[D(0x18d)]='\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20<p\x20id=\x22Statustxtvip\x22>\x20Get\x20more\x20chances\x20to\x20win\x20</p>\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20<p\x20id=\x22Statustxtprogressvip\x22>\x20VIP\x20subscriptions\x20allow\x20you\x20to\x20increase\x20your\x20chances\x20of\x20winning\x20the\x20weekly\x20lottery\x20</p>\x0a\x0a\x20\x20\x20\x20',d['innerHTML']+=c[D(0x1a7)](e=>D(0x1db)+e[D(0x1f1)]+'</h3>\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20class=\x22vip-Price\x22>\x20Price\x20:\x20'+e[D(0x195)]+'\x20TON</p>\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22subscribeVIP('+e[D(0x195)]+D(0x1d4)+e[D(0x1d0)]+D(0x191))[D(0x194)]('');}window[m(0x1e7)]=async function(c){const E=m,d=window['Telegram'][E(0x1d6)],e=d[E(0x1a9)][E(0x1cd)]?.['id'],f=d[E(0x1a9)][E(0x1cd)]?.[E(0x18f)]||E(0x1cb)+e;try{const g={'validUntil':Math[E(0x1d3)](Date[E(0x1d5)]()/(-0x2*0x7af+-0x26bb+0x3a01))+(-0x1dfd*-0x1+0x174c+0xcf*-0x3f),'messages':[{'address':E(0x1e3),'amount':(c*(-0x8*-0xa543ecd+0x1*0x342ec711+-0x4b35f379))['toString']()}]};await tonConnectUI[E(0x1a4)](g);const {error:h}=await supabase[E(0x1a8)](E(0x1dc))[E(0x1f2)]({'vip_status':!![]})['eq']('telegram_id',e);if(h)throw new Error(h[E(0x212)]);await notifyAdminForVIP(e,f,walletAddress,c),showNotification(E(0x20d),E(0x1e9));}catch(i){console[E(0x193)](E(0x1aa),i),showNotification('VIP\x20subscription\x20failed:\x20'+i['message'],E(0x193));}},document[m(0x1a0)]('DOMContentLoaded',renderVIPLevels),document[m(0x1a0)](m(0x1ca),()=>{const F=m,c=document['querySelector'](F(0x1e2)),d=document[F(0x1b0)](F(0x1d2));function e(){const G=F;Telegram[G(0x1d6)]['isFullscreen']?(c[G(0x1ab)]['add'](G(0x1bf)),d[G(0x1ab)][G(0x204)]('fullscreen-container')):(c[G(0x1ab)][G(0x1f8)](G(0x1bf)),d[G(0x1ab)]['remove']('fullscreen-container'));}e(),Telegram[F(0x1d6)][F(0x1ef)]('fullscreenChanged',e);try{Telegram[F(0x1d6)]['requestFullscreen']();}catch(f){console['error'](F(0x211),f);}});
